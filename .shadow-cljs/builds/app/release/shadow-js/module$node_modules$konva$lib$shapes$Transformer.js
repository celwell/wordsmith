["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/konva/lib/shapes/Transformer.js"],"~:js","shadow$provide[66]=function(n,e,t,k){function w(a,b,c){if(\"rotater\"===a)return\"crosshair\";b+=x.Util._degToRad(p[a]||0);c&&(b*=-1);a=(x.Util._radToDeg(b)%360+360)%360;if(x.Util._inRange(a,337.5,360)||x.Util._inRange(a,0,22.5))return\"ns-resize\";if(x.Util._inRange(a,22.5,67.5))return\"nesw-resize\";if(x.Util._inRange(a,67.5,112.5))return\"ew-resize\";if(x.Util._inRange(a,112.5,157.5))return\"nwse-resize\";if(x.Util._inRange(a,157.5,202.5))return\"ns-resize\";if(x.Util._inRange(a,202.5,247.5))return\"nesw-resize\";\nif(x.Util._inRange(a,247.5,292.5))return\"ew-resize\";if(x.Util._inRange(a,292.5,337.5))return\"nwse-resize\";x.Util.error(\"Transformer has unknown angle for cursor detection: \"+a);return\"pointer\"}var v=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):\n(d.prototype=c.prototype,new d)}}();Object.defineProperty(k,\"__esModule\",{value:!0});var x=e(22);n=e(24);var q=e(28),m=e(33),d=e(59),b=e(36),h=e(21);t=e(23);e=e(21);var a=\"resizeEnabledChange rotateAnchorOffsetChange rotateEnabledChange enabledAnchorsChange anchorSizeChange borderEnabledChange borderStrokeChange borderStrokeWidthChange borderDashChange anchorStrokeChange anchorStrokeWidthChange anchorFillChange anchorCornerRadiusChange ignoreStrokeChange\".split(\" \").map(function(a){return a+\".tr-konva\"}).join(\" \"),\nc=\"widthChange heightChange scaleXChange scaleYChange skewXChange skewYChange rotationChange offsetXChange offsetYChange transformsEnabledChange strokeWidthChange\".split(\" \").map(function(a){return a+\".tr-konva\"}).join(\" \"),p={\"top-left\":-45,\"top-center\":0,\"top-right\":45,\"middle-right\":-90,\"middle-left\":90,\"bottom-left\":-135,\"bottom-center\":180,\"bottom-right\":135},r=\"top-left top-center top-right middle-right middle-left bottom-left bottom-center bottom-right\".split(\" \"),D=function(e){function k(b){b=\ne.call(this,b)||this;b._transforming=!1;b._createElements();b._handleMouseMove=b._handleMouseMove.bind(b);b._handleMouseUp=b._handleMouseUp.bind(b);b.update=b.update.bind(b);b.on(a,b.update);b.getNode()&&b.update();return b}v(k,e);k.prototype.attachTo=function(a){this.setNode(a);return this};k.prototype.setNode=function(a){var b=this;this._node&&this.detach();this._node=a;this._resetTransformCache();var d=a._attrsAffectingSize.map(function(a){return a+\"Change.tr-konva\"}).join(\" \"),e=function(){b._resetTransformCache();\nb._transforming||b.update()};a.on(d,e);a.on(c,e);a.on(\"xChange.tr-konva yChange.tr-konva\",function(){return b._resetTransformCache()});this.findOne(\".top-left\")&&this.update();return this};k.prototype.getNode=function(){return this._node};k.prototype.detach=function(){this.getNode()&&(this.getNode().off(\".tr-konva\"),this._node=void 0);this._resetTransformCache()};k.prototype._resetTransformCache=function(){this._clearCache(\"nodeRect\");this._clearCache(\"transform\");this._clearSelfAndDescendantCache(\"absoluteTransform\")};\nk.prototype._getNodeRect=function(){return this._getCache(\"nodeRect\",this.__getNodeRect)};k.prototype.__getNodeRect=function(){var a=this.getNode();if(!a)return{x:-1E8,y:-1E8,width:0,height:0,rotation:0};a.parent&&this.parent&&a.parent!==this.parent&&x.Util.warn(\"Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.\");var b=a.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),\nc=h.Konva.getAngle(a.rotation()),d=b.x*a.scaleX()-a.offsetX()*a.scaleX(),e=b.y*a.scaleY()-a.offsetY()*a.scaleY();return{x:a.x()+d*Math.cos(c)+e*Math.sin(-c),y:a.y()+e*Math.cos(c)+d*Math.sin(c),width:b.width*a.scaleX(),height:b.height*a.scaleY(),rotation:a.rotation()}};k.prototype.getX=function(){return this._getNodeRect().x};k.prototype.getY=function(){return this._getNodeRect().y};k.prototype.getRotation=function(){return this._getNodeRect().rotation};k.prototype.getWidth=function(){return this._getNodeRect().width};\nk.prototype.getHeight=function(){return this._getNodeRect().height};k.prototype._createElements=function(){this._createBack();r.forEach(function(a){this._createAnchor(a)}.bind(this));this._createAnchor(\"rotater\")};k.prototype._createAnchor=function(a){var b=this,c=new d.Rect({stroke:\"rgb(0, 161, 255)\",fill:\"white\",strokeWidth:1,name:a+\" _anchor\",dragDistance:0,draggable:!0}),e=this;c.on(\"mousedown touchstart\",function(a){e._handleMouseDown(a)});c.on(\"dragstart\",function(a){a.cancelBubble=!0});c.on(\"dragmove\",\nfunction(a){a.cancelBubble=!0});c.on(\"dragend\",function(a){a.cancelBubble=!0});c.on(\"mouseenter\",function(){var d=h.Konva.getAngle(b.rotation()),e=b.getNode().getAbsoluteScale();d=w(a,d,0>e.y*e.x);c.getStage().content.style.cursor=d;b._cursorChange=!0});c.on(\"mouseout\",function(){c.getStage()&&c.getParent()&&(c.getStage().content.style.cursor=\"\",b._cursorChange=!1)});this.add(c)};k.prototype._createBack=function(){var a=new m.Shape({name:\"back\",width:0,height:0,listening:!1,sceneFunc:function(a){var b=\nthis.getParent(),c=b.padding();a.beginPath();a.rect(-c,-c,this.width()+2*c,this.height()+2*c);a.moveTo(this.width()/2,-c);b.rotateEnabled()&&a.lineTo(this.width()/2,-b.rotateAnchorOffset()*x.Util._sign(this.height()));a.fillStrokeShape(this)}});this.add(a)};k.prototype._handleMouseDown=function(a){this._movingAnchorName=a.target.name().split(\" \")[0];var b=this._getNodeRect(),c=b.width;b=b.height;var d=Math.sqrt(Math.pow(c,2)+Math.pow(b,2));this.sin=Math.abs(b/d);this.cos=Math.abs(c/d);window.addEventListener(\"mousemove\",\nthis._handleMouseMove);window.addEventListener(\"touchmove\",this._handleMouseMove);window.addEventListener(\"mouseup\",this._handleMouseUp,!0);window.addEventListener(\"touchend\",this._handleMouseUp,!0);this._transforming=!0;this._fire(\"transformstart\",{evt:a});this.getNode()._fire(\"transformstart\",{evt:a})};k.prototype._handleMouseMove=function(a){var b=this.findOne(\".\"+this._movingAnchorName);var c=b.getStage().getContent().getBoundingClientRect();b.setAbsolutePosition({x:(void 0!==a.clientX?a.clientX:\na.touches[0].clientX)-c.left,y:(void 0!==a.clientX?a.clientY:a.touches[0].clientY)-c.top});c=this.keepRatio()||a.shiftKey;if(\"top-left\"===this._movingAnchorName){if(c){c=Math.sqrt(Math.pow(this.findOne(\".bottom-right\").x()-b.x(),2)+Math.pow(this.findOne(\".bottom-right\").y()-b.y(),2));var d=this.findOne(\".top-left\").x()>this.findOne(\".bottom-right\").x()?-1:1;var e=this.findOne(\".top-left\").y()>this.findOne(\".bottom-right\").y()?-1:1;d*=c*this.cos;var m=c*this.sin*e;this.findOne(\".top-left\").x(this.findOne(\".bottom-right\").x()-\nd);this.findOne(\".top-left\").y(this.findOne(\".bottom-right\").y()-m)}}else if(\"top-center\"===this._movingAnchorName)this.findOne(\".top-left\").y(b.y());else if(\"top-right\"===this._movingAnchorName)c&&(c=Math.sqrt(Math.pow(this.findOne(\".bottom-left\").x()-b.x(),2)+Math.pow(this.findOne(\".bottom-left\").y()-b.y(),2)),d=this.findOne(\".top-right\").x()<this.findOne(\".top-left\").x()?-1:1,e=this.findOne(\".top-right\").y()>this.findOne(\".bottom-left\").y()?-1:1,d*=c*this.cos,m=c*this.sin*e,this.findOne(\".top-right\").x(d),\nthis.findOne(\".top-right\").y(this.findOne(\".bottom-left\").y()-m)),c=b.position(),this.findOne(\".top-left\").y(c.y),this.findOne(\".bottom-right\").x(c.x);else if(\"middle-left\"===this._movingAnchorName)this.findOne(\".top-left\").x(b.x());else if(\"middle-right\"===this._movingAnchorName)this.findOne(\".bottom-right\").x(b.x());else if(\"bottom-left\"===this._movingAnchorName)c&&(c=Math.sqrt(Math.pow(this.findOne(\".top-right\").x()-b.x(),2)+Math.pow(this.findOne(\".top-right\").y()-b.y(),2)),d=this.findOne(\".top-right\").x()<\nthis.findOne(\".bottom-left\").x()?-1:1,e=this.findOne(\".bottom-right\").y()<this.findOne(\".top-left\").y()?-1:1,d*=c*this.cos,m=c*this.sin*e,this.findOne(\".bottom-left\").x(this.findOne(\".top-right\").x()-d),this.findOne(\".bottom-left\").y(m)),c=b.position(),this.findOne(\".top-left\").x(c.x),this.findOne(\".bottom-right\").y(c.y);else if(\"bottom-center\"===this._movingAnchorName)this.findOne(\".bottom-right\").y(b.y());else if(\"bottom-right\"===this._movingAnchorName)c&&(c=Math.sqrt(Math.pow(this.findOne(\".bottom-right\").x(),\n2)+Math.pow(this.findOne(\".bottom-right\").y(),2)),d=this.findOne(\".top-left\").x()>this.findOne(\".bottom-right\").x()?-1:1,e=this.findOne(\".top-left\").y()>this.findOne(\".bottom-right\").y()?-1:1,d*=c*this.cos,m=c*this.sin*e,this.findOne(\".bottom-right\").x(d),this.findOne(\".bottom-right\").y(m));else if(\"rotater\"===this._movingAnchorName){c=this.padding();e=this._getNodeRect();d=b.x()-e.width/2;m=-b.y()+e.height/2;b=Math.atan2(-m,d)+Math.PI/2;0>e.height&&(b-=Math.PI);d=h.Konva.getAngle(this.rotation());\nb=x.Util._radToDeg(d)+x.Util._radToDeg(b);m=h.Konva.getAngle(this.getNode().rotation());for(var k=x.Util._degToRad(b),n=this.rotationSnaps(),p=0;p<n.length;p++){var q=h.Konva.getAngle(n[p]);.1>Math.abs(q-x.Util._degToRad(b))%(2*Math.PI)&&(b=x.Util._radToDeg(q),k=x.Util._degToRad(b))}this._fitNodeInto({rotation:h.Konva.angleDeg?b:x.Util._degToRad(b),x:e.x+(e.width/2+c)*(Math.cos(m)-Math.cos(k))+(e.height/2+c)*(Math.sin(-m)-Math.sin(-k))-(c*Math.cos(d)+c*Math.sin(-d)),y:e.y+(e.height/2+c)*(Math.cos(m)-\nMath.cos(k))+(e.width/2+c)*(Math.sin(m)-Math.sin(k))-(c*Math.cos(d)+c*Math.sin(d)),width:e.width+2*c,height:e.height+2*c},a)}else console.error(Error(\"Wrong position argument of selection resizer: \"+this._movingAnchorName));if(\"rotater\"!==this._movingAnchorName){c=this.findOne(\".top-left\").getAbsolutePosition(this.getParent());if(this.centeredScaling()||a.altKey)c=this.findOne(\".top-left\"),e=this.findOne(\".bottom-right\"),d=c.x(),b=c.y(),m=this.getWidth()-e.x(),k=this.getHeight()-e.y(),e.move({x:-d,\ny:-b}),c.move({x:m,y:k}),c=c.getAbsolutePosition(this.getParent());d=c.x;m=c.y;c=this.findOne(\".bottom-right\").x()-this.findOne(\".top-left\").x();e=this.findOne(\".bottom-right\").y()-this.findOne(\".top-left\").y();this._fitNodeInto({x:d+this.offsetX(),y:m+this.offsetY(),width:c,height:e},a)}};k.prototype._handleMouseUp=function(a){this._removeEvents(a)};k.prototype._removeEvents=function(a){if(this._transforming){this._transforming=!1;window.removeEventListener(\"mousemove\",this._handleMouseMove);window.removeEventListener(\"touchmove\",\nthis._handleMouseMove);window.removeEventListener(\"mouseup\",this._handleMouseUp,!0);window.removeEventListener(\"touchend\",this._handleMouseUp,!0);this._fire(\"transformend\",{evt:a});var b=this.getNode();b&&b.fire(\"transformend\",{evt:a})}};k.prototype._fitNodeInto=function(a,b){var c=this.boundBoxFunc();if(c){var d=this._getNodeRect();a=c.call(this,d,a)}var e=this.getNode();void 0!==a.rotation&&this.getNode().rotation(a.rotation);var m=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),\nk=this.padding();c=(a.width-2*k)/m.width;d=(a.height-2*k)/m.height;var n=h.Konva.getAngle(e.rotation()),p=m.x*c-k-e.offsetX()*c;e=m.y*d-k-e.offsetY()*d;this.getNode().setAttrs({scaleX:c,scaleY:d,x:a.x-(p*Math.cos(n)+e*Math.sin(-n)),y:a.y-(e*Math.cos(n)+p*Math.sin(n))});this._fire(\"transform\",{evt:b});this.getNode()._fire(\"transform\",{evt:b});this.update();this.getLayer().batchDraw()};k.prototype.forceUpdate=function(){this._resetTransformCache();this.update()};k.prototype.update=function(){var a=\nthis,b=this._getNodeRect(),c=this.getNode(),d={x:1,y:1};c&&c.getParent()&&(d=c.getParent().getAbsoluteScale());c={x:1/d.x,y:1/d.y};var e=b.width;b=b.height;var h=this.enabledAnchors(),m=this.resizeEnabled(),k=this.padding(),n=this.anchorSize();this.find(\"._anchor\").each(function(b){return b.setAttrs({width:n,height:n,offsetX:n/2,offsetY:n/2,stroke:a.anchorStroke(),strokeWidth:a.anchorStrokeWidth(),fill:a.anchorFill(),cornerRadius:a.anchorCornerRadius()})});this.findOne(\".top-left\").setAttrs({x:-k,\ny:-k,scale:c,visible:m&&0<=h.indexOf(\"top-left\")});this.findOne(\".top-center\").setAttrs({x:e/2,y:-k,scale:c,visible:m&&0<=h.indexOf(\"top-center\")});this.findOne(\".top-right\").setAttrs({x:e+k,y:-k,scale:c,visible:m&&0<=h.indexOf(\"top-right\")});this.findOne(\".middle-left\").setAttrs({x:-k,y:b/2,scale:c,visible:m&&0<=h.indexOf(\"middle-left\")});this.findOne(\".middle-right\").setAttrs({x:e+k,y:b/2,scale:c,visible:m&&0<=h.indexOf(\"middle-right\")});this.findOne(\".bottom-left\").setAttrs({x:-k,y:b+k,scale:c,\nvisible:m&&0<=h.indexOf(\"bottom-left\")});this.findOne(\".bottom-center\").setAttrs({x:e/2,y:b+k,scale:c,visible:m&&0<=h.indexOf(\"bottom-center\")});this.findOne(\".bottom-right\").setAttrs({x:e+k,y:b+k,scale:c,visible:m&&0<=h.indexOf(\"bottom-right\")});h=-this.rotateAnchorOffset()*Math.abs(c.y);this.findOne(\".rotater\").setAttrs({x:e/2,y:h*x.Util._sign(b),scale:c,visible:this.rotateEnabled()});this.findOne(\".back\").setAttrs({width:e*d.x,height:b*d.y,scale:c,visible:this.borderEnabled(),stroke:this.borderStroke(),\nstrokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})};k.prototype.isTransforming=function(){return this._transforming};k.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var a=this.findOne(\".\"+this._movingAnchorName);a&&a.stopDrag()}};k.prototype.destroy=function(){this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=\"\");b.Group.prototype.destroy.call(this);this.detach();this._removeEvents();return this};k.prototype.toObject=function(){return q.Node.prototype.toObject.call(this)};\nreturn k}(b.Group);k.Transformer=D;D.prototype.className=\"Transformer\";e._registerNode(D);n.Factory.addGetterSetter(D,\"enabledAnchors\",r,function(a){a instanceof Array||x.Util.warn(\"enabledAnchors value should be an array\");a instanceof Array&&a.forEach(function(a){-1===r.indexOf(a)&&x.Util.warn(\"Unknown anchor name: \"+a+\". Available names are: \"+r.join(\", \"))});return a||[]});n.Factory.addGetterSetter(D,\"resizeEnabled\",!0);n.Factory.addGetterSetter(D,\"anchorSize\",10,t.getNumberValidator());n.Factory.addGetterSetter(D,\n\"rotateEnabled\",!0);n.Factory.addGetterSetter(D,\"rotationSnaps\",[]);n.Factory.addGetterSetter(D,\"rotateAnchorOffset\",50,t.getNumberValidator());n.Factory.addGetterSetter(D,\"borderEnabled\",!0);n.Factory.addGetterSetter(D,\"anchorStroke\",\"rgb(0, 161, 255)\");n.Factory.addGetterSetter(D,\"anchorStrokeWidth\",1,t.getNumberValidator());n.Factory.addGetterSetter(D,\"anchorFill\",\"white\");n.Factory.addGetterSetter(D,\"anchorCornerRadius\",0,t.getNumberValidator());n.Factory.addGetterSetter(D,\"borderStroke\",\"rgb(0, 161, 255)\");\nn.Factory.addGetterSetter(D,\"borderStrokeWidth\",1,t.getNumberValidator());n.Factory.addGetterSetter(D,\"borderDash\");n.Factory.addGetterSetter(D,\"keepRatio\",!0);n.Factory.addGetterSetter(D,\"centeredScaling\",!1);n.Factory.addGetterSetter(D,\"ignoreStroke\",!1);n.Factory.addGetterSetter(D,\"padding\",0,t.getNumberValidator());n.Factory.addGetterSetter(D,\"node\");n.Factory.addGetterSetter(D,\"boundBoxFunc\");n.Factory.backCompat(D,{lineEnabled:\"borderEnabled\",rotateHandlerOffset:\"rotateAnchorOffset\",enabledHandlers:\"enabledAnchors\"});\nx.Collection.mapMethods(D)}","~:source","shadow$provide[66] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Node_1 = require(\"../Node\");\nvar Shape_1 = require(\"../Shape\");\nvar Rect_1 = require(\"./Rect\");\nvar Group_1 = require(\"../Group\");\nvar Global_1 = require(\"../Global\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_2 = require(\"../Global\");\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange'\n]\n    .map(function (e) { return e + (\".\" + EVENTS_NAME); })\n    .join(' ');\nvar NODE_RECT = 'nodeRect';\nvar TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange'\n]\n    .map(function (e) { return e + (\".\" + EVENTS_NAME); })\n    .join(' ');\nvar ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135\n};\nfunction getCursor(anchorName, rad, isMirrored) {\n    if (anchorName === 'rotater') {\n        return 'crosshair';\n    }\n    rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\n    if (isMirrored) {\n        rad *= -1;\n    }\n    var angle = ((Util_1.Util._radToDeg(rad) % 360) + 360) % 360;\n    if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nvar ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right'\n];\nvar MAX_SAFE_INTEGER = 100000000;\nvar Transformer = (function (_super) {\n    __extends(Transformer, _super);\n    function Transformer(config) {\n        var _this = _super.call(this, config) || this;\n        _this._transforming = false;\n        _this._createElements();\n        _this._handleMouseMove = _this._handleMouseMove.bind(_this);\n        _this._handleMouseUp = _this._handleMouseUp.bind(_this);\n        _this.update = _this.update.bind(_this);\n        _this.on(ATTR_CHANGE_LIST, _this.update);\n        if (_this.getNode()) {\n            _this.update();\n        }\n        return _this;\n    }\n    Transformer.prototype.attachTo = function (node) {\n        this.setNode(node);\n        return this;\n    };\n    Transformer.prototype.setNode = function (node) {\n        var _this = this;\n        if (this._node) {\n            this.detach();\n        }\n        this._node = node;\n        this._resetTransformCache();\n        var additionalEvents = node._attrsAffectingSize\n            .map(function (prop) { return prop + 'Change.' + EVENTS_NAME; })\n            .join(' ');\n        var onChange = function () {\n            _this._resetTransformCache();\n            if (!_this._transforming) {\n                _this.update();\n            }\n        };\n        node.on(additionalEvents, onChange);\n        node.on(TRANSFORM_CHANGE_STR, onChange);\n        node.on(\"xChange.\" + EVENTS_NAME + \" yChange.\" + EVENTS_NAME, function () {\n            return _this._resetTransformCache();\n        });\n        var elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    };\n    Transformer.prototype.getNode = function () {\n        return this._node;\n    };\n    Transformer.prototype.detach = function () {\n        if (this.getNode()) {\n            this.getNode().off('.' + EVENTS_NAME);\n            this._node = undefined;\n        }\n        this._resetTransformCache();\n    };\n    Transformer.prototype._resetTransformCache = function () {\n        this._clearCache(NODE_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    };\n    Transformer.prototype._getNodeRect = function () {\n        return this._getCache(NODE_RECT, this.__getNodeRect);\n    };\n    Transformer.prototype.__getNodeRect = function () {\n        var node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0\n            };\n        }\n        if (node.parent && this.parent && node.parent !== this.parent) {\n            Util_1.Util.warn('Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.');\n        }\n        var rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke()\n        });\n        var rotation = Global_1.Konva.getAngle(node.rotation());\n        var dx = rect.x * node.scaleX() - node.offsetX() * node.scaleX();\n        var dy = rect.y * node.scaleY() - node.offsetY() * node.scaleY();\n        return {\n            x: node.x() + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: node.y() + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * node.scaleX(),\n            height: rect.height * node.scaleY(),\n            rotation: node.rotation()\n        };\n    };\n    Transformer.prototype.getX = function () {\n        return this._getNodeRect().x;\n    };\n    Transformer.prototype.getY = function () {\n        return this._getNodeRect().y;\n    };\n    Transformer.prototype.getRotation = function () {\n        return this._getNodeRect().rotation;\n    };\n    Transformer.prototype.getWidth = function () {\n        return this._getNodeRect().width;\n    };\n    Transformer.prototype.getHeight = function () {\n        return this._getNodeRect().height;\n    };\n    Transformer.prototype._createElements = function () {\n        this._createBack();\n        ANCHORS_NAMES.forEach(function (name) {\n            this._createAnchor(name);\n        }.bind(this));\n        this._createAnchor('rotater');\n    };\n    Transformer.prototype._createAnchor = function (name) {\n        var _this = this;\n        var anchor = new Rect_1.Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true\n        });\n        var self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', function (e) {\n            e.cancelBubble = true;\n        });\n        anchor.on('dragmove', function (e) {\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', function (e) {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', function () {\n            var rad = Global_1.Konva.getAngle(_this.rotation());\n            var scale = _this.getNode().getAbsoluteScale();\n            var isMirrored = scale.y * scale.x < 0;\n            var cursor = getCursor(name, rad, isMirrored);\n            anchor.getStage().content.style.cursor = cursor;\n            _this._cursorChange = true;\n        });\n        anchor.on('mouseout', function () {\n            if (!anchor.getStage() || !anchor.getParent()) {\n                return;\n            }\n            anchor.getStage().content.style.cursor = '';\n            _this._cursorChange = false;\n        });\n        this.add(anchor);\n    };\n    Transformer.prototype._createBack = function () {\n        var back = new Shape_1.Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            listening: false,\n            sceneFunc: function (ctx) {\n                var tr = this.getParent();\n                var padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n                ctx.moveTo(this.width() / 2, -padding);\n                if (tr.rotateEnabled()) {\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()));\n                }\n                ctx.fillStrokeShape(this);\n            }\n        });\n        this.add(back);\n    };\n    Transformer.prototype._handleMouseDown = function (e) {\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        var attrs = this._getNodeRect();\n        var width = attrs.width;\n        var height = attrs.height;\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        window.addEventListener('mousemove', this._handleMouseMove);\n        window.addEventListener('touchmove', this._handleMouseMove);\n        window.addEventListener('mouseup', this._handleMouseUp, true);\n        window.addEventListener('touchend', this._handleMouseUp, true);\n        this._transforming = true;\n        this._fire('transformstart', { evt: e });\n        this.getNode()._fire('transformstart', { evt: e });\n    };\n    Transformer.prototype._handleMouseMove = function (e) {\n        var x, y, newHypotenuse;\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\n        var stage = anchorNode.getStage();\n        var box = stage.getContent().getBoundingClientRect();\n        var zeroPoint = {\n            x: box.left,\n            y: box.top\n        };\n        var pointerPos = {\n            left: e.clientX !== undefined ? e.clientX : e.touches[0].clientX,\n            top: e.clientX !== undefined ? e.clientY : e.touches[0].clientY\n        };\n        var newAbsPos = {\n            x: pointerPos.left - zeroPoint.x,\n            y: pointerPos.top - zeroPoint.y\n        };\n        anchorNode.setAbsolutePosition(newAbsPos);\n        var keepProportion = this.keepRatio() || e.shiftKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x() - anchorNode.x(), 2) +\n                    Math.pow(this.findOne('.bottom-right').y() - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-left').x() > this.findOne('.bottom-right').x()\n                    ? -1\n                    : 1;\n                var reverseY = this.findOne('.top-left').y() > this.findOne('.bottom-right').y()\n                    ? -1\n                    : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(this.findOne('.bottom-right').x() - x);\n                this.findOne('.top-left').y(this.findOne('.bottom-right').y() - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-left').x() - anchorNode.x(), 2) +\n                    Math.pow(this.findOne('.bottom-left').y() - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < this.findOne('.top-left').x()\n                    ? -1\n                    : 1;\n                var reverseY = this.findOne('.top-right').y() > this.findOne('.bottom-left').y()\n                    ? -1\n                    : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(x);\n                this.findOne('.top-right').y(this.findOne('.bottom-left').y() - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.top-right').x() - anchorNode.x(), 2) +\n                    Math.pow(this.findOne('.top-right').y() - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < this.findOne('.bottom-left').x()\n                    ? -1\n                    : 1;\n                var reverseY = this.findOne('.bottom-right').y() < this.findOne('.top-left').y()\n                    ? -1\n                    : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-left').x(this.findOne('.top-right').x() - x);\n                this.findOne('.bottom-left').y(y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x(), 2) +\n                    Math.pow(this.findOne('.bottom-right').y(), 2));\n                var reverseX = this.findOne('.top-left').x() > this.findOne('.bottom-right').x()\n                    ? -1\n                    : 1;\n                var reverseY = this.findOne('.top-left').y() > this.findOne('.bottom-right').y()\n                    ? -1\n                    : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(x);\n                this.findOne('.bottom-right').y(y);\n            }\n        }\n        else if (this._movingAnchorName === 'rotater') {\n            var padding = this.padding();\n            var attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            var dAlpha = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                dAlpha -= Math.PI;\n            }\n            var rot = Global_1.Konva.getAngle(this.rotation());\n            var newRotation = Util_1.Util._radToDeg(rot) + Util_1.Util._radToDeg(dAlpha);\n            var alpha = Global_1.Konva.getAngle(this.getNode().rotation());\n            var newAlpha = Util_1.Util._degToRad(newRotation);\n            var snaps = this.rotationSnaps();\n            var offset = 0.1;\n            for (var i = 0; i < snaps.length; i++) {\n                var angle = Global_1.Konva.getAngle(snaps[i]);\n                var dif = Math.abs(angle - Util_1.Util._degToRad(newRotation)) % (Math.PI * 2);\n                if (dif < offset) {\n                    newRotation = Util_1.Util._radToDeg(angle);\n                    newAlpha = Util_1.Util._degToRad(newRotation);\n                }\n            }\n            var dx = padding;\n            var dy = padding;\n            this._fitNodeInto({\n                rotation: Global_1.Konva.angleDeg ? newRotation : Util_1.Util._degToRad(newRotation),\n                x: attrs.x +\n                    (attrs.width / 2 + padding) *\n                        (Math.cos(alpha) - Math.cos(newAlpha)) +\n                    (attrs.height / 2 + padding) *\n                        (Math.sin(-alpha) - Math.sin(-newAlpha)) -\n                    (dx * Math.cos(rot) + dy * Math.sin(-rot)),\n                y: attrs.y +\n                    (attrs.height / 2 + padding) *\n                        (Math.cos(alpha) - Math.cos(newAlpha)) +\n                    (attrs.width / 2 + padding) *\n                        (Math.sin(alpha) - Math.sin(newAlpha)) -\n                    (dy * Math.cos(rot) + dx * Math.sin(rot)),\n                width: attrs.width + padding * 2,\n                height: attrs.height + padding * 2\n            }, e);\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        if (this._movingAnchorName === 'rotater') {\n            return;\n        }\n        var absPos = this.findOne('.top-left').getAbsolutePosition(this.getParent());\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            var topLeft = this.findOne('.top-left');\n            var bottomRight = this.findOne('.bottom-right');\n            var topOffsetX = topLeft.x();\n            var topOffsetY = topLeft.y();\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY\n            });\n            absPos = topLeft.getAbsolutePosition(this.getParent());\n        }\n        x = absPos.x;\n        y = absPos.y;\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodeInto({\n            x: x + this.offsetX(),\n            y: y + this.offsetY(),\n            width: width,\n            height: height\n        }, e);\n    };\n    Transformer.prototype._handleMouseUp = function (e) {\n        this._removeEvents(e);\n    };\n    Transformer.prototype._removeEvents = function (e) {\n        if (this._transforming) {\n            this._transforming = false;\n            window.removeEventListener('mousemove', this._handleMouseMove);\n            window.removeEventListener('touchmove', this._handleMouseMove);\n            window.removeEventListener('mouseup', this._handleMouseUp, true);\n            window.removeEventListener('touchend', this._handleMouseUp, true);\n            this._fire('transformend', { evt: e });\n            var node = this.getNode();\n            if (node) {\n                node.fire('transformend', { evt: e });\n            }\n        }\n    };\n    Transformer.prototype._fitNodeInto = function (newAttrs, evt) {\n        var boundBoxFunc = this.boundBoxFunc();\n        if (boundBoxFunc) {\n            var oldAttrs = this._getNodeRect();\n            newAttrs = boundBoxFunc.call(this, oldAttrs, newAttrs);\n        }\n        var node = this.getNode();\n        if (newAttrs.rotation !== undefined) {\n            this.getNode().rotation(newAttrs.rotation);\n        }\n        var pure = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke()\n        });\n        var padding = this.padding();\n        var scaleX = (newAttrs.width - padding * 2) / pure.width;\n        var scaleY = (newAttrs.height - padding * 2) / pure.height;\n        var rotation = Global_1.Konva.getAngle(node.rotation());\n        var dx = pure.x * scaleX - padding - node.offsetX() * scaleX;\n        var dy = pure.y * scaleY - padding - node.offsetY() * scaleY;\n        this.getNode().setAttrs({\n            scaleX: scaleX,\n            scaleY: scaleY,\n            x: newAttrs.x - (dx * Math.cos(rotation) + dy * Math.sin(-rotation)),\n            y: newAttrs.y - (dy * Math.cos(rotation) + dx * Math.sin(rotation))\n        });\n        this._fire('transform', { evt: evt });\n        this.getNode()._fire('transform', { evt: evt });\n        this.update();\n        this.getLayer().batchDraw();\n    };\n    Transformer.prototype.forceUpdate = function () {\n        this._resetTransformCache();\n        this.update();\n    };\n    Transformer.prototype.update = function () {\n        var _this = this;\n        var attrs = this._getNodeRect();\n        var node = this.getNode();\n        var scale = { x: 1, y: 1 };\n        if (node && node.getParent()) {\n            scale = node.getParent().getAbsoluteScale();\n        }\n        var invertedScale = {\n            x: 1 / scale.x,\n            y: 1 / scale.y\n        };\n        var width = attrs.width;\n        var height = attrs.height;\n        var enabledAnchors = this.enabledAnchors();\n        var resizeEnabled = this.resizeEnabled();\n        var padding = this.padding();\n        var anchorSize = this.anchorSize();\n        this.find('._anchor').each(function (node) {\n            return node.setAttrs({\n                width: anchorSize,\n                height: anchorSize,\n                offsetX: anchorSize / 2,\n                offsetY: anchorSize / 2,\n                stroke: _this.anchorStroke(),\n                strokeWidth: _this.anchorStrokeWidth(),\n                fill: _this.anchorFill(),\n                cornerRadius: _this.anchorCornerRadius()\n            });\n        });\n        this.findOne('.top-left').setAttrs({\n            x: -padding,\n            y: -padding,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0\n        });\n        this.findOne('.top-center').setAttrs({\n            x: width / 2,\n            y: -padding,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0\n        });\n        this.findOne('.top-right').setAttrs({\n            x: width + padding,\n            y: -padding,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0\n        });\n        this.findOne('.middle-left').setAttrs({\n            x: -padding,\n            y: height / 2,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0\n        });\n        this.findOne('.middle-right').setAttrs({\n            x: width + padding,\n            y: height / 2,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0\n        });\n        this.findOne('.bottom-left').setAttrs({\n            x: -padding,\n            y: height + padding,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0\n        });\n        this.findOne('.bottom-center').setAttrs({\n            x: width / 2,\n            y: height + padding,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0\n        });\n        this.findOne('.bottom-right').setAttrs({\n            x: width + padding,\n            y: height + padding,\n            scale: invertedScale,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0\n        });\n        var scaledRotateAnchorOffset = -this.rotateAnchorOffset() * Math.abs(invertedScale.y);\n        this.findOne('.rotater').setAttrs({\n            x: width / 2,\n            y: scaledRotateAnchorOffset * Util_1.Util._sign(height),\n            scale: invertedScale,\n            visible: this.rotateEnabled()\n        });\n        this.findOne('.back').setAttrs({\n            width: width * scale.x,\n            height: height * scale.y,\n            scale: invertedScale,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash()\n        });\n    };\n    Transformer.prototype.isTransforming = function () {\n        return this._transforming;\n    };\n    Transformer.prototype.stopTransform = function () {\n        if (this._transforming) {\n            this._removeEvents();\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    };\n    Transformer.prototype.destroy = function () {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content.style.cursor = '';\n        }\n        Group_1.Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    };\n    Transformer.prototype.toObject = function () {\n        return Node_1.Node.prototype.toObject.call(this);\n    };\n    return Transformer;\n}(Group_1.Group));\nexports.Transformer = Transformer;\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        Util_1.Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                Util_1.Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\nGlobal_2._registerNode(Transformer);\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory_1.Factory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors'\n});\nUtil_1.Collection.mapMethods(Transformer);\n\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$konva$lib$Factory","~$module$node_modules$konva$lib$Validators","~$shadow.js","~$module$node_modules$konva$lib$Global","~$module$node_modules$konva$lib$Shape","~$module$node_modules$konva$lib$Node","~$module$node_modules$konva$lib$shapes$Rect","~$module$node_modules$konva$lib$Group","~$module$node_modules$konva$lib$Util"]],"~:properties",["^5",["_getNodeRect","width","sceneFunc","getWidth","skipShadow","toObject","_handleMouseDown","prototype","height","rotateHandlerOffset","_fitNodeInto","isTransforming","scale","lineEnabled","_createBack","cancelBubble","className","cornerRadius","x","__esModule","detach","_cursorChange","setNode","update","getNode","scaleX","name","sin","Transformer","stroke","value","getY","_node","visible","destroy","_createAnchor","dragDistance","listening","dash","_resetTransformCache","fill","_transforming","cursor","strokeWidth","getX","scaleY","rotation","getHeight","draggable","enabledHandlers","cos","evt","getRotation","_removeEvents","skipTransform","y","attachTo","__proto__","offsetX","_handleMouseUp","_createElements","__getNodeRect","forceUpdate","_handleMouseMove","offsetY","skipStroke","_movingAnchorName","stopTransform","constructor"]],"~:compiled-at",1589761458359,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$konva$lib$shapes$Transformer.js\",\n\"lineCount\":30,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/konva/lib/shapes/Transformer.js\"],\n\"sourcesContent\":[\"shadow$provide[66] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar Util_1 = require(\\\"../Util\\\");\\nvar Factory_1 = require(\\\"../Factory\\\");\\nvar Node_1 = require(\\\"../Node\\\");\\nvar Shape_1 = require(\\\"../Shape\\\");\\nvar Rect_1 = require(\\\"./Rect\\\");\\nvar Group_1 = require(\\\"../Group\\\");\\nvar Global_1 = require(\\\"../Global\\\");\\nvar Validators_1 = require(\\\"../Validators\\\");\\nvar Global_2 = require(\\\"../Global\\\");\\nvar EVENTS_NAME = 'tr-konva';\\nvar ATTR_CHANGE_LIST = [\\n    'resizeEnabledChange',\\n    'rotateAnchorOffsetChange',\\n    'rotateEnabledChange',\\n    'enabledAnchorsChange',\\n    'anchorSizeChange',\\n    'borderEnabledChange',\\n    'borderStrokeChange',\\n    'borderStrokeWidthChange',\\n    'borderDashChange',\\n    'anchorStrokeChange',\\n    'anchorStrokeWidthChange',\\n    'anchorFillChange',\\n    'anchorCornerRadiusChange',\\n    'ignoreStrokeChange'\\n]\\n    .map(function (e) { return e + (\\\".\\\" + EVENTS_NAME); })\\n    .join(' ');\\nvar NODE_RECT = 'nodeRect';\\nvar TRANSFORM_CHANGE_STR = [\\n    'widthChange',\\n    'heightChange',\\n    'scaleXChange',\\n    'scaleYChange',\\n    'skewXChange',\\n    'skewYChange',\\n    'rotationChange',\\n    'offsetXChange',\\n    'offsetYChange',\\n    'transformsEnabledChange',\\n    'strokeWidthChange'\\n]\\n    .map(function (e) { return e + (\\\".\\\" + EVENTS_NAME); })\\n    .join(' ');\\nvar ANGLES = {\\n    'top-left': -45,\\n    'top-center': 0,\\n    'top-right': 45,\\n    'middle-right': -90,\\n    'middle-left': 90,\\n    'bottom-left': -135,\\n    'bottom-center': 180,\\n    'bottom-right': 135\\n};\\nfunction getCursor(anchorName, rad, isMirrored) {\\n    if (anchorName === 'rotater') {\\n        return 'crosshair';\\n    }\\n    rad += Util_1.Util._degToRad(ANGLES[anchorName] || 0);\\n    if (isMirrored) {\\n        rad *= -1;\\n    }\\n    var angle = ((Util_1.Util._radToDeg(rad) % 360) + 360) % 360;\\n    if (Util_1.Util._inRange(angle, 315 + 22.5, 360) || Util_1.Util._inRange(angle, 0, 22.5)) {\\n        return 'ns-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\\n        return 'nesw-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\\n        return 'ew-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\\n        return 'nwse-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\\n        return 'ns-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\\n        return 'nesw-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\\n        return 'ew-resize';\\n    }\\n    else if (Util_1.Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\\n        return 'nwse-resize';\\n    }\\n    else {\\n        Util_1.Util.error('Transformer has unknown angle for cursor detection: ' + angle);\\n        return 'pointer';\\n    }\\n}\\nvar ANCHORS_NAMES = [\\n    'top-left',\\n    'top-center',\\n    'top-right',\\n    'middle-right',\\n    'middle-left',\\n    'bottom-left',\\n    'bottom-center',\\n    'bottom-right'\\n];\\nvar MAX_SAFE_INTEGER = 100000000;\\nvar Transformer = (function (_super) {\\n    __extends(Transformer, _super);\\n    function Transformer(config) {\\n        var _this = _super.call(this, config) || this;\\n        _this._transforming = false;\\n        _this._createElements();\\n        _this._handleMouseMove = _this._handleMouseMove.bind(_this);\\n        _this._handleMouseUp = _this._handleMouseUp.bind(_this);\\n        _this.update = _this.update.bind(_this);\\n        _this.on(ATTR_CHANGE_LIST, _this.update);\\n        if (_this.getNode()) {\\n            _this.update();\\n        }\\n        return _this;\\n    }\\n    Transformer.prototype.attachTo = function (node) {\\n        this.setNode(node);\\n        return this;\\n    };\\n    Transformer.prototype.setNode = function (node) {\\n        var _this = this;\\n        if (this._node) {\\n            this.detach();\\n        }\\n        this._node = node;\\n        this._resetTransformCache();\\n        var additionalEvents = node._attrsAffectingSize\\n            .map(function (prop) { return prop + 'Change.' + EVENTS_NAME; })\\n            .join(' ');\\n        var onChange = function () {\\n            _this._resetTransformCache();\\n            if (!_this._transforming) {\\n                _this.update();\\n            }\\n        };\\n        node.on(additionalEvents, onChange);\\n        node.on(TRANSFORM_CHANGE_STR, onChange);\\n        node.on(\\\"xChange.\\\" + EVENTS_NAME + \\\" yChange.\\\" + EVENTS_NAME, function () {\\n            return _this._resetTransformCache();\\n        });\\n        var elementsCreated = !!this.findOne('.top-left');\\n        if (elementsCreated) {\\n            this.update();\\n        }\\n        return this;\\n    };\\n    Transformer.prototype.getNode = function () {\\n        return this._node;\\n    };\\n    Transformer.prototype.detach = function () {\\n        if (this.getNode()) {\\n            this.getNode().off('.' + EVENTS_NAME);\\n            this._node = undefined;\\n        }\\n        this._resetTransformCache();\\n    };\\n    Transformer.prototype._resetTransformCache = function () {\\n        this._clearCache(NODE_RECT);\\n        this._clearCache('transform');\\n        this._clearSelfAndDescendantCache('absoluteTransform');\\n    };\\n    Transformer.prototype._getNodeRect = function () {\\n        return this._getCache(NODE_RECT, this.__getNodeRect);\\n    };\\n    Transformer.prototype.__getNodeRect = function () {\\n        var node = this.getNode();\\n        if (!node) {\\n            return {\\n                x: -MAX_SAFE_INTEGER,\\n                y: -MAX_SAFE_INTEGER,\\n                width: 0,\\n                height: 0,\\n                rotation: 0\\n            };\\n        }\\n        if (node.parent && this.parent && node.parent !== this.parent) {\\n            Util_1.Util.warn('Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.');\\n        }\\n        var rect = node.getClientRect({\\n            skipTransform: true,\\n            skipShadow: true,\\n            skipStroke: this.ignoreStroke()\\n        });\\n        var rotation = Global_1.Konva.getAngle(node.rotation());\\n        var dx = rect.x * node.scaleX() - node.offsetX() * node.scaleX();\\n        var dy = rect.y * node.scaleY() - node.offsetY() * node.scaleY();\\n        return {\\n            x: node.x() + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\\n            y: node.y() + dy * Math.cos(rotation) + dx * Math.sin(rotation),\\n            width: rect.width * node.scaleX(),\\n            height: rect.height * node.scaleY(),\\n            rotation: node.rotation()\\n        };\\n    };\\n    Transformer.prototype.getX = function () {\\n        return this._getNodeRect().x;\\n    };\\n    Transformer.prototype.getY = function () {\\n        return this._getNodeRect().y;\\n    };\\n    Transformer.prototype.getRotation = function () {\\n        return this._getNodeRect().rotation;\\n    };\\n    Transformer.prototype.getWidth = function () {\\n        return this._getNodeRect().width;\\n    };\\n    Transformer.prototype.getHeight = function () {\\n        return this._getNodeRect().height;\\n    };\\n    Transformer.prototype._createElements = function () {\\n        this._createBack();\\n        ANCHORS_NAMES.forEach(function (name) {\\n            this._createAnchor(name);\\n        }.bind(this));\\n        this._createAnchor('rotater');\\n    };\\n    Transformer.prototype._createAnchor = function (name) {\\n        var _this = this;\\n        var anchor = new Rect_1.Rect({\\n            stroke: 'rgb(0, 161, 255)',\\n            fill: 'white',\\n            strokeWidth: 1,\\n            name: name + ' _anchor',\\n            dragDistance: 0,\\n            draggable: true\\n        });\\n        var self = this;\\n        anchor.on('mousedown touchstart', function (e) {\\n            self._handleMouseDown(e);\\n        });\\n        anchor.on('dragstart', function (e) {\\n            e.cancelBubble = true;\\n        });\\n        anchor.on('dragmove', function (e) {\\n            e.cancelBubble = true;\\n        });\\n        anchor.on('dragend', function (e) {\\n            e.cancelBubble = true;\\n        });\\n        anchor.on('mouseenter', function () {\\n            var rad = Global_1.Konva.getAngle(_this.rotation());\\n            var scale = _this.getNode().getAbsoluteScale();\\n            var isMirrored = scale.y * scale.x < 0;\\n            var cursor = getCursor(name, rad, isMirrored);\\n            anchor.getStage().content.style.cursor = cursor;\\n            _this._cursorChange = true;\\n        });\\n        anchor.on('mouseout', function () {\\n            if (!anchor.getStage() || !anchor.getParent()) {\\n                return;\\n            }\\n            anchor.getStage().content.style.cursor = '';\\n            _this._cursorChange = false;\\n        });\\n        this.add(anchor);\\n    };\\n    Transformer.prototype._createBack = function () {\\n        var back = new Shape_1.Shape({\\n            name: 'back',\\n            width: 0,\\n            height: 0,\\n            listening: false,\\n            sceneFunc: function (ctx) {\\n                var tr = this.getParent();\\n                var padding = tr.padding();\\n                ctx.beginPath();\\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\\n                ctx.moveTo(this.width() / 2, -padding);\\n                if (tr.rotateEnabled()) {\\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util_1.Util._sign(this.height()));\\n                }\\n                ctx.fillStrokeShape(this);\\n            }\\n        });\\n        this.add(back);\\n    };\\n    Transformer.prototype._handleMouseDown = function (e) {\\n        this._movingAnchorName = e.target.name().split(' ')[0];\\n        var attrs = this._getNodeRect();\\n        var width = attrs.width;\\n        var height = attrs.height;\\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\\n        this.sin = Math.abs(height / hypotenuse);\\n        this.cos = Math.abs(width / hypotenuse);\\n        window.addEventListener('mousemove', this._handleMouseMove);\\n        window.addEventListener('touchmove', this._handleMouseMove);\\n        window.addEventListener('mouseup', this._handleMouseUp, true);\\n        window.addEventListener('touchend', this._handleMouseUp, true);\\n        this._transforming = true;\\n        this._fire('transformstart', { evt: e });\\n        this.getNode()._fire('transformstart', { evt: e });\\n    };\\n    Transformer.prototype._handleMouseMove = function (e) {\\n        var x, y, newHypotenuse;\\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\\n        var stage = anchorNode.getStage();\\n        var box = stage.getContent().getBoundingClientRect();\\n        var zeroPoint = {\\n            x: box.left,\\n            y: box.top\\n        };\\n        var pointerPos = {\\n            left: e.clientX !== undefined ? e.clientX : e.touches[0].clientX,\\n            top: e.clientX !== undefined ? e.clientY : e.touches[0].clientY\\n        };\\n        var newAbsPos = {\\n            x: pointerPos.left - zeroPoint.x,\\n            y: pointerPos.top - zeroPoint.y\\n        };\\n        anchorNode.setAbsolutePosition(newAbsPos);\\n        var keepProportion = this.keepRatio() || e.shiftKey;\\n        if (this._movingAnchorName === 'top-left') {\\n            if (keepProportion) {\\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x() - anchorNode.x(), 2) +\\n                    Math.pow(this.findOne('.bottom-right').y() - anchorNode.y(), 2));\\n                var reverseX = this.findOne('.top-left').x() > this.findOne('.bottom-right').x()\\n                    ? -1\\n                    : 1;\\n                var reverseY = this.findOne('.top-left').y() > this.findOne('.bottom-right').y()\\n                    ? -1\\n                    : 1;\\n                x = newHypotenuse * this.cos * reverseX;\\n                y = newHypotenuse * this.sin * reverseY;\\n                this.findOne('.top-left').x(this.findOne('.bottom-right').x() - x);\\n                this.findOne('.top-left').y(this.findOne('.bottom-right').y() - y);\\n            }\\n        }\\n        else if (this._movingAnchorName === 'top-center') {\\n            this.findOne('.top-left').y(anchorNode.y());\\n        }\\n        else if (this._movingAnchorName === 'top-right') {\\n            if (keepProportion) {\\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-left').x() - anchorNode.x(), 2) +\\n                    Math.pow(this.findOne('.bottom-left').y() - anchorNode.y(), 2));\\n                var reverseX = this.findOne('.top-right').x() < this.findOne('.top-left').x()\\n                    ? -1\\n                    : 1;\\n                var reverseY = this.findOne('.top-right').y() > this.findOne('.bottom-left').y()\\n                    ? -1\\n                    : 1;\\n                x = newHypotenuse * this.cos * reverseX;\\n                y = newHypotenuse * this.sin * reverseY;\\n                this.findOne('.top-right').x(x);\\n                this.findOne('.top-right').y(this.findOne('.bottom-left').y() - y);\\n            }\\n            var pos = anchorNode.position();\\n            this.findOne('.top-left').y(pos.y);\\n            this.findOne('.bottom-right').x(pos.x);\\n        }\\n        else if (this._movingAnchorName === 'middle-left') {\\n            this.findOne('.top-left').x(anchorNode.x());\\n        }\\n        else if (this._movingAnchorName === 'middle-right') {\\n            this.findOne('.bottom-right').x(anchorNode.x());\\n        }\\n        else if (this._movingAnchorName === 'bottom-left') {\\n            if (keepProportion) {\\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.top-right').x() - anchorNode.x(), 2) +\\n                    Math.pow(this.findOne('.top-right').y() - anchorNode.y(), 2));\\n                var reverseX = this.findOne('.top-right').x() < this.findOne('.bottom-left').x()\\n                    ? -1\\n                    : 1;\\n                var reverseY = this.findOne('.bottom-right').y() < this.findOne('.top-left').y()\\n                    ? -1\\n                    : 1;\\n                x = newHypotenuse * this.cos * reverseX;\\n                y = newHypotenuse * this.sin * reverseY;\\n                this.findOne('.bottom-left').x(this.findOne('.top-right').x() - x);\\n                this.findOne('.bottom-left').y(y);\\n            }\\n            pos = anchorNode.position();\\n            this.findOne('.top-left').x(pos.x);\\n            this.findOne('.bottom-right').y(pos.y);\\n        }\\n        else if (this._movingAnchorName === 'bottom-center') {\\n            this.findOne('.bottom-right').y(anchorNode.y());\\n        }\\n        else if (this._movingAnchorName === 'bottom-right') {\\n            if (keepProportion) {\\n                newHypotenuse = Math.sqrt(Math.pow(this.findOne('.bottom-right').x(), 2) +\\n                    Math.pow(this.findOne('.bottom-right').y(), 2));\\n                var reverseX = this.findOne('.top-left').x() > this.findOne('.bottom-right').x()\\n                    ? -1\\n                    : 1;\\n                var reverseY = this.findOne('.top-left').y() > this.findOne('.bottom-right').y()\\n                    ? -1\\n                    : 1;\\n                x = newHypotenuse * this.cos * reverseX;\\n                y = newHypotenuse * this.sin * reverseY;\\n                this.findOne('.bottom-right').x(x);\\n                this.findOne('.bottom-right').y(y);\\n            }\\n        }\\n        else if (this._movingAnchorName === 'rotater') {\\n            var padding = this.padding();\\n            var attrs = this._getNodeRect();\\n            x = anchorNode.x() - attrs.width / 2;\\n            y = -anchorNode.y() + attrs.height / 2;\\n            var dAlpha = Math.atan2(-y, x) + Math.PI / 2;\\n            if (attrs.height < 0) {\\n                dAlpha -= Math.PI;\\n            }\\n            var rot = Global_1.Konva.getAngle(this.rotation());\\n            var newRotation = Util_1.Util._radToDeg(rot) + Util_1.Util._radToDeg(dAlpha);\\n            var alpha = Global_1.Konva.getAngle(this.getNode().rotation());\\n            var newAlpha = Util_1.Util._degToRad(newRotation);\\n            var snaps = this.rotationSnaps();\\n            var offset = 0.1;\\n            for (var i = 0; i < snaps.length; i++) {\\n                var angle = Global_1.Konva.getAngle(snaps[i]);\\n                var dif = Math.abs(angle - Util_1.Util._degToRad(newRotation)) % (Math.PI * 2);\\n                if (dif < offset) {\\n                    newRotation = Util_1.Util._radToDeg(angle);\\n                    newAlpha = Util_1.Util._degToRad(newRotation);\\n                }\\n            }\\n            var dx = padding;\\n            var dy = padding;\\n            this._fitNodeInto({\\n                rotation: Global_1.Konva.angleDeg ? newRotation : Util_1.Util._degToRad(newRotation),\\n                x: attrs.x +\\n                    (attrs.width / 2 + padding) *\\n                        (Math.cos(alpha) - Math.cos(newAlpha)) +\\n                    (attrs.height / 2 + padding) *\\n                        (Math.sin(-alpha) - Math.sin(-newAlpha)) -\\n                    (dx * Math.cos(rot) + dy * Math.sin(-rot)),\\n                y: attrs.y +\\n                    (attrs.height / 2 + padding) *\\n                        (Math.cos(alpha) - Math.cos(newAlpha)) +\\n                    (attrs.width / 2 + padding) *\\n                        (Math.sin(alpha) - Math.sin(newAlpha)) -\\n                    (dy * Math.cos(rot) + dx * Math.sin(rot)),\\n                width: attrs.width + padding * 2,\\n                height: attrs.height + padding * 2\\n            }, e);\\n        }\\n        else {\\n            console.error(new Error('Wrong position argument of selection resizer: ' +\\n                this._movingAnchorName));\\n        }\\n        if (this._movingAnchorName === 'rotater') {\\n            return;\\n        }\\n        var absPos = this.findOne('.top-left').getAbsolutePosition(this.getParent());\\n        var centeredScaling = this.centeredScaling() || e.altKey;\\n        if (centeredScaling) {\\n            var topLeft = this.findOne('.top-left');\\n            var bottomRight = this.findOne('.bottom-right');\\n            var topOffsetX = topLeft.x();\\n            var topOffsetY = topLeft.y();\\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\\n            bottomRight.move({\\n                x: -topOffsetX,\\n                y: -topOffsetY\\n            });\\n            topLeft.move({\\n                x: bottomOffsetX,\\n                y: bottomOffsetY\\n            });\\n            absPos = topLeft.getAbsolutePosition(this.getParent());\\n        }\\n        x = absPos.x;\\n        y = absPos.y;\\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\\n        this._fitNodeInto({\\n            x: x + this.offsetX(),\\n            y: y + this.offsetY(),\\n            width: width,\\n            height: height\\n        }, e);\\n    };\\n    Transformer.prototype._handleMouseUp = function (e) {\\n        this._removeEvents(e);\\n    };\\n    Transformer.prototype._removeEvents = function (e) {\\n        if (this._transforming) {\\n            this._transforming = false;\\n            window.removeEventListener('mousemove', this._handleMouseMove);\\n            window.removeEventListener('touchmove', this._handleMouseMove);\\n            window.removeEventListener('mouseup', this._handleMouseUp, true);\\n            window.removeEventListener('touchend', this._handleMouseUp, true);\\n            this._fire('transformend', { evt: e });\\n            var node = this.getNode();\\n            if (node) {\\n                node.fire('transformend', { evt: e });\\n            }\\n        }\\n    };\\n    Transformer.prototype._fitNodeInto = function (newAttrs, evt) {\\n        var boundBoxFunc = this.boundBoxFunc();\\n        if (boundBoxFunc) {\\n            var oldAttrs = this._getNodeRect();\\n            newAttrs = boundBoxFunc.call(this, oldAttrs, newAttrs);\\n        }\\n        var node = this.getNode();\\n        if (newAttrs.rotation !== undefined) {\\n            this.getNode().rotation(newAttrs.rotation);\\n        }\\n        var pure = node.getClientRect({\\n            skipTransform: true,\\n            skipShadow: true,\\n            skipStroke: this.ignoreStroke()\\n        });\\n        var padding = this.padding();\\n        var scaleX = (newAttrs.width - padding * 2) / pure.width;\\n        var scaleY = (newAttrs.height - padding * 2) / pure.height;\\n        var rotation = Global_1.Konva.getAngle(node.rotation());\\n        var dx = pure.x * scaleX - padding - node.offsetX() * scaleX;\\n        var dy = pure.y * scaleY - padding - node.offsetY() * scaleY;\\n        this.getNode().setAttrs({\\n            scaleX: scaleX,\\n            scaleY: scaleY,\\n            x: newAttrs.x - (dx * Math.cos(rotation) + dy * Math.sin(-rotation)),\\n            y: newAttrs.y - (dy * Math.cos(rotation) + dx * Math.sin(rotation))\\n        });\\n        this._fire('transform', { evt: evt });\\n        this.getNode()._fire('transform', { evt: evt });\\n        this.update();\\n        this.getLayer().batchDraw();\\n    };\\n    Transformer.prototype.forceUpdate = function () {\\n        this._resetTransformCache();\\n        this.update();\\n    };\\n    Transformer.prototype.update = function () {\\n        var _this = this;\\n        var attrs = this._getNodeRect();\\n        var node = this.getNode();\\n        var scale = { x: 1, y: 1 };\\n        if (node && node.getParent()) {\\n            scale = node.getParent().getAbsoluteScale();\\n        }\\n        var invertedScale = {\\n            x: 1 / scale.x,\\n            y: 1 / scale.y\\n        };\\n        var width = attrs.width;\\n        var height = attrs.height;\\n        var enabledAnchors = this.enabledAnchors();\\n        var resizeEnabled = this.resizeEnabled();\\n        var padding = this.padding();\\n        var anchorSize = this.anchorSize();\\n        this.find('._anchor').each(function (node) {\\n            return node.setAttrs({\\n                width: anchorSize,\\n                height: anchorSize,\\n                offsetX: anchorSize / 2,\\n                offsetY: anchorSize / 2,\\n                stroke: _this.anchorStroke(),\\n                strokeWidth: _this.anchorStrokeWidth(),\\n                fill: _this.anchorFill(),\\n                cornerRadius: _this.anchorCornerRadius()\\n            });\\n        });\\n        this.findOne('.top-left').setAttrs({\\n            x: -padding,\\n            y: -padding,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0\\n        });\\n        this.findOne('.top-center').setAttrs({\\n            x: width / 2,\\n            y: -padding,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0\\n        });\\n        this.findOne('.top-right').setAttrs({\\n            x: width + padding,\\n            y: -padding,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0\\n        });\\n        this.findOne('.middle-left').setAttrs({\\n            x: -padding,\\n            y: height / 2,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0\\n        });\\n        this.findOne('.middle-right').setAttrs({\\n            x: width + padding,\\n            y: height / 2,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0\\n        });\\n        this.findOne('.bottom-left').setAttrs({\\n            x: -padding,\\n            y: height + padding,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0\\n        });\\n        this.findOne('.bottom-center').setAttrs({\\n            x: width / 2,\\n            y: height + padding,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0\\n        });\\n        this.findOne('.bottom-right').setAttrs({\\n            x: width + padding,\\n            y: height + padding,\\n            scale: invertedScale,\\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0\\n        });\\n        var scaledRotateAnchorOffset = -this.rotateAnchorOffset() * Math.abs(invertedScale.y);\\n        this.findOne('.rotater').setAttrs({\\n            x: width / 2,\\n            y: scaledRotateAnchorOffset * Util_1.Util._sign(height),\\n            scale: invertedScale,\\n            visible: this.rotateEnabled()\\n        });\\n        this.findOne('.back').setAttrs({\\n            width: width * scale.x,\\n            height: height * scale.y,\\n            scale: invertedScale,\\n            visible: this.borderEnabled(),\\n            stroke: this.borderStroke(),\\n            strokeWidth: this.borderStrokeWidth(),\\n            dash: this.borderDash()\\n        });\\n    };\\n    Transformer.prototype.isTransforming = function () {\\n        return this._transforming;\\n    };\\n    Transformer.prototype.stopTransform = function () {\\n        if (this._transforming) {\\n            this._removeEvents();\\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\\n            if (anchorNode) {\\n                anchorNode.stopDrag();\\n            }\\n        }\\n    };\\n    Transformer.prototype.destroy = function () {\\n        if (this.getStage() && this._cursorChange) {\\n            this.getStage().content.style.cursor = '';\\n        }\\n        Group_1.Group.prototype.destroy.call(this);\\n        this.detach();\\n        this._removeEvents();\\n        return this;\\n    };\\n    Transformer.prototype.toObject = function () {\\n        return Node_1.Node.prototype.toObject.call(this);\\n    };\\n    return Transformer;\\n}(Group_1.Group));\\nexports.Transformer = Transformer;\\nfunction validateAnchors(val) {\\n    if (!(val instanceof Array)) {\\n        Util_1.Util.warn('enabledAnchors value should be an array');\\n    }\\n    if (val instanceof Array) {\\n        val.forEach(function (name) {\\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\\n                Util_1.Util.warn('Unknown anchor name: ' +\\n                    name +\\n                    '. Available names are: ' +\\n                    ANCHORS_NAMES.join(', '));\\n            }\\n        });\\n    }\\n    return val || [];\\n}\\nTransformer.prototype.className = 'Transformer';\\nGlobal_2._registerNode(Transformer);\\nFactory_1.Factory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\\nFactory_1.Factory.addGetterSetter(Transformer, 'resizeEnabled', true);\\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorSize', 10, Validators_1.getNumberValidator());\\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateEnabled', true);\\nFactory_1.Factory.addGetterSetter(Transformer, 'rotationSnaps', []);\\nFactory_1.Factory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, Validators_1.getNumberValidator());\\nFactory_1.Factory.addGetterSetter(Transformer, 'borderEnabled', true);\\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, Validators_1.getNumberValidator());\\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorFill', 'white');\\nFactory_1.Factory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, Validators_1.getNumberValidator());\\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\\nFactory_1.Factory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, Validators_1.getNumberValidator());\\nFactory_1.Factory.addGetterSetter(Transformer, 'borderDash');\\nFactory_1.Factory.addGetterSetter(Transformer, 'keepRatio', true);\\nFactory_1.Factory.addGetterSetter(Transformer, 'centeredScaling', false);\\nFactory_1.Factory.addGetterSetter(Transformer, 'ignoreStroke', false);\\nFactory_1.Factory.addGetterSetter(Transformer, 'padding', 0, Validators_1.getNumberValidator());\\nFactory_1.Factory.addGetterSetter(Transformer, 'node');\\nFactory_1.Factory.addGetterSetter(Transformer, 'boundBoxFunc');\\nFactory_1.Factory.backCompat(Transformer, {\\n    lineEnabled: 'borderEnabled',\\n    rotateHandlerOffset: 'rotateAnchorOffset',\\n    enabledHandlers: 'enabledAnchors'\\n});\\nUtil_1.Collection.mapMethods(Transformer);\\n\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"getCursor\",\"anchorName\",\"rad\",\"isMirrored\",\"Util_1\",\"Util\",\"_degToRad\",\"ANGLES\",\"angle\",\"_radToDeg\",\"_inRange\",\"error\",\"__extends\",\"extendStatics\",\"d\",\"b\",\"Object\",\"setPrototypeOf\",\"__proto__\",\"Array\",\"p\",\"hasOwnProperty\",\"__\",\"constructor\",\"prototype\",\"create\",\"defineProperty\",\"value\",\"Factory_1\",\"Node_1\",\"Shape_1\",\"Rect_1\",\"Group_1\",\"Global_1\",\"Validators_1\",\"Global_2\",\"ATTR_CHANGE_LIST\",\"map\",\"e\",\"join\",\"TRANSFORM_CHANGE_STR\",\"ANCHORS_NAMES\",\"Transformer\",\"_super\",\"config\",\"_this\",\"call\",\"_transforming\",\"_createElements\",\"_handleMouseMove\",\"bind\",\"_handleMouseUp\",\"update\",\"on\",\"getNode\",\"attachTo\",\"Transformer.prototype.attachTo\",\"node\",\"setNode\",\"Transformer.prototype.setNode\",\"_node\",\"detach\",\"_resetTransformCache\",\"additionalEvents\",\"_attrsAffectingSize\",\"prop\",\"onChange\",\"findOne\",\"elementsCreated\",\"Transformer.prototype.getNode\",\"Transformer.prototype.detach\",\"off\",\"undefined\",\"Transformer.prototype._resetTransformCache\",\"_clearCache\",\"NODE_RECT\",\"_clearSelfAndDescendantCache\",\"_getNodeRect\",\"Transformer.prototype._getNodeRect\",\"_getCache\",\"__getNodeRect\",\"Transformer.prototype.__getNodeRect\",\"x\",\"y\",\"width\",\"height\",\"rotation\",\"parent\",\"warn\",\"rect\",\"getClientRect\",\"skipTransform\",\"skipShadow\",\"skipStroke\",\"ignoreStroke\",\"Konva\",\"getAngle\",\"dx\",\"scaleX\",\"offsetX\",\"dy\",\"scaleY\",\"offsetY\",\"Math\",\"cos\",\"sin\",\"getX\",\"Transformer.prototype.getX\",\"getY\",\"Transformer.prototype.getY\",\"getRotation\",\"Transformer.prototype.getRotation\",\"getWidth\",\"Transformer.prototype.getWidth\",\"getHeight\",\"Transformer.prototype.getHeight\",\"Transformer.prototype._createElements\",\"_createBack\",\"forEach\",\"name\",\"_createAnchor\",\"Transformer.prototype._createAnchor\",\"anchor\",\"Rect\",\"stroke\",\"fill\",\"strokeWidth\",\"dragDistance\",\"draggable\",\"self\",\"_handleMouseDown\",\"cancelBubble\",\"scale\",\"getAbsoluteScale\",\"cursor\",\"getStage\",\"content\",\"style\",\"_cursorChange\",\"getParent\",\"add\",\"Transformer.prototype._createBack\",\"back\",\"Shape\",\"listening\",\"sceneFunc\",\"ctx\",\"tr\",\"padding\",\"beginPath\",\"moveTo\",\"rotateEnabled\",\"lineTo\",\"rotateAnchorOffset\",\"_sign\",\"fillStrokeShape\",\"Transformer.prototype._handleMouseDown\",\"_movingAnchorName\",\"target\",\"split\",\"attrs\",\"hypotenuse\",\"sqrt\",\"pow\",\"abs\",\"window\",\"addEventListener\",\"_fire\",\"evt\",\"Transformer.prototype._handleMouseMove\",\"anchorNode\",\"box\",\"stage\",\"getContent\",\"getBoundingClientRect\",\"setAbsolutePosition\",\"newAbsPos\",\"left\",\"clientX\",\"touches\",\"top\",\"clientY\",\"keepProportion\",\"keepRatio\",\"shiftKey\",\"newHypotenuse\",\"reverseX\",\"reverseY\",\"pos\",\"position\",\"dAlpha\",\"atan2\",\"PI\",\"rot\",\"newRotation\",\"alpha\",\"newAlpha\",\"snaps\",\"rotationSnaps\",\"i\",\"length\",\"offset\",\"_fitNodeInto\",\"angleDeg\",\"console\",\"Error\",\"absPos\",\"getAbsolutePosition\",\"centeredScaling\",\"altKey\",\"topLeft\",\"bottomRight\",\"topOffsetX\",\"topOffsetY\",\"bottomOffsetX\",\"bottomOffsetY\",\"move\",\"Transformer.prototype._handleMouseUp\",\"_removeEvents\",\"Transformer.prototype._removeEvents\",\"removeEventListener\",\"fire\",\"Transformer.prototype._fitNodeInto\",\"newAttrs\",\"boundBoxFunc\",\"oldAttrs\",\"pure\",\"setAttrs\",\"getLayer\",\"batchDraw\",\"forceUpdate\",\"Transformer.prototype.forceUpdate\",\"Transformer.prototype.update\",\"invertedScale\",\"enabledAnchors\",\"resizeEnabled\",\"anchorSize\",\"find\",\"each\",\"anchorStroke\",\"anchorStrokeWidth\",\"anchorFill\",\"cornerRadius\",\"anchorCornerRadius\",\"visible\",\"indexOf\",\"scaledRotateAnchorOffset\",\"borderEnabled\",\"borderStroke\",\"borderStrokeWidth\",\"dash\",\"borderDash\",\"isTransforming\",\"Transformer.prototype.isTransforming\",\"stopTransform\",\"Transformer.prototype.stopTransform\",\"stopDrag\",\"destroy\",\"Transformer.prototype.destroy\",\"Group\",\"toObject\",\"Transformer.prototype.toObject\",\"Node\",\"className\",\"_registerNode\",\"Factory\",\"addGetterSetter\",\"validateAnchors\",\"val\",\"getNumberValidator\",\"backCompat\",\"lineEnabled\",\"rotateHandlerOffset\",\"enabledHandlers\",\"Collection\",\"mapMethods\"]\n}\n"]