["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/konva/lib/BaseLayer.js"],"~:js","shadow$provide.module$node_modules$konva$lib$BaseLayer=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):\n(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,\"__esModule\",{value:!0});var Util_1=require(\"module$node_modules$konva$lib$Util\");module=require(\"module$node_modules$konva$lib$Container\");var Node_1=require(\"module$node_modules$konva$lib$Node\");global=require(\"module$node_modules$konva$lib$Factory\");var Canvas_1=require(\"module$node_modules$konva$lib$Canvas\");require=function(_super){function BaseLayer(config){config=_super.call(this,config)||this;config.canvas=new Canvas_1.SceneCanvas;\nconfig._waitingForDraw=!1;config.on(\"visibleChange\",config._checkVisibility);config._checkVisibility();config.on(\"imageSmoothingEnabledChange\",config._checkSmooth);config._checkSmooth();return config}__extends(BaseLayer,_super);BaseLayer.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()};BaseLayer.prototype.getCanvas=function(){return this.canvas};BaseLayer.prototype.getHitCanvas=function(){return this.hitCanvas};BaseLayer.prototype.getContext=function(){return this.getCanvas().getContext()};\nBaseLayer.prototype.clear=function(bounds){this.getContext().clear(bounds);return this};BaseLayer.prototype.setZIndex=function(index){_super.prototype.setZIndex.call(this,index);var stage=this.getStage();stage&&(stage.content.removeChild(this.getCanvas()._canvas),index<stage.getChildren().length-1?stage.content.insertBefore(this.getCanvas()._canvas,stage.getChildren()[index+1].getCanvas()._canvas):stage.content.appendChild(this.getCanvas()._canvas));return this};BaseLayer.prototype.moveToTop=function(){Node_1.Node.prototype.moveToTop.call(this);\nvar stage=this.getStage();stage&&(stage.content.removeChild(this.getCanvas()._canvas),stage.content.appendChild(this.getCanvas()._canvas));return!0};BaseLayer.prototype.moveUp=function(){if(!Node_1.Node.prototype.moveUp.call(this))return!1;var stage=this.getStage();if(!stage)return!1;stage.content.removeChild(this.getCanvas()._canvas);this.index<stage.getChildren().length-1?stage.content.insertBefore(this.getCanvas()._canvas,stage.getChildren()[this.index+1].getCanvas()._canvas):stage.content.appendChild(this.getCanvas()._canvas);\nreturn!0};BaseLayer.prototype.moveDown=function(){if(Node_1.Node.prototype.moveDown.call(this)){var stage=this.getStage();if(stage){var children=stage.getChildren();stage.content.removeChild(this.getCanvas()._canvas);stage.content.insertBefore(this.getCanvas()._canvas,children[this.index+1].getCanvas()._canvas)}return!0}return!1};BaseLayer.prototype.moveToBottom=function(){if(Node_1.Node.prototype.moveToBottom.call(this)){var stage=this.getStage();if(stage){var children=stage.getChildren();stage.content.removeChild(this.getCanvas()._canvas);\nstage.content.insertBefore(this.getCanvas()._canvas,children[1].getCanvas()._canvas)}return!0}return!1};BaseLayer.prototype.getLayer=function(){return this};BaseLayer.prototype.hitGraphEnabled=function(){return!0};BaseLayer.prototype.remove=function(){var _canvas=this.getCanvas()._canvas;Node_1.Node.prototype.remove.call(this);_canvas&&_canvas.parentNode&&Util_1.Util._isInDocument(_canvas)&&_canvas.parentNode.removeChild(_canvas);return this};BaseLayer.prototype.getStage=function(){return this.parent};\nBaseLayer.prototype.setSize=function(_a){this.canvas.setSize(_a.width,_a.height);return this};BaseLayer.prototype._toKonvaCanvas=function(config){config=config||{};config.width=config.width||this.getWidth();config.height=config.height||this.getHeight();config.x=void 0!==config.x?config.x:this.x();config.y=void 0!==config.y?config.y:this.y();return Node_1.Node.prototype._toKonvaCanvas.call(this,config)};BaseLayer.prototype._checkVisibility=function(){this.visible()?this.canvas._canvas.style.display=\n\"block\":this.canvas._canvas.style.display=\"none\"};BaseLayer.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()};BaseLayer.prototype.getWidth=function(){if(this.parent)return this.parent.width()};BaseLayer.prototype.setWidth=function(){Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.')};BaseLayer.prototype.getHeight=function(){if(this.parent)return this.parent.height()};BaseLayer.prototype.setHeight=\nfunction(){Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.')};BaseLayer.prototype.getIntersection=function(pos,selector){return null};BaseLayer.prototype.batchDraw=function(){var _this=this;this._waitingForDraw||(this._waitingForDraw=!0,Util_1.Util.requestAnimFrame(function(){_this.draw();_this._waitingForDraw=!1}));return this};BaseLayer.prototype._applyTransform=function(shape,context,top){shape=shape.getAbsoluteTransform(top).getMatrix();context.transform(shape[0],\nshape[1],shape[2],shape[3],shape[4],shape[5])};return BaseLayer}(module.Container);exports.BaseLayer=require;require.prototype.nodeType=\"BaseLayer\";global.Factory.addGetterSetter(require,\"imageSmoothingEnabled\",!0);global.Factory.addGetterSetter(require,\"clearBeforeDraw\",!0);Util_1.Collection.mapMethods(require)}","~:source","shadow$provide[\"module$node_modules$konva$lib$BaseLayer\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"./Util\");\nvar Container_1 = require(\"./Container\");\nvar Node_1 = require(\"./Node\");\nvar Factory_1 = require(\"./Factory\");\nvar Canvas_1 = require(\"./Canvas\");\nvar BaseLayer = (function (_super) {\n    __extends(BaseLayer, _super);\n    function BaseLayer(config) {\n        var _this = _super.call(this, config) || this;\n        _this.canvas = new Canvas_1.SceneCanvas();\n        _this._waitingForDraw = false;\n        _this.on('visibleChange', _this._checkVisibility);\n        _this._checkVisibility();\n        _this.on('imageSmoothingEnabledChange', _this._checkSmooth);\n        _this._checkSmooth();\n        return _this;\n    }\n    BaseLayer.prototype.createPNGStream = function () {\n        var c = this.canvas._canvas;\n        return c.createPNGStream();\n    };\n    BaseLayer.prototype.getCanvas = function () {\n        return this.canvas;\n    };\n    BaseLayer.prototype.getHitCanvas = function () {\n        return this.hitCanvas;\n    };\n    BaseLayer.prototype.getContext = function () {\n        return this.getCanvas().getContext();\n    };\n    BaseLayer.prototype.clear = function (bounds) {\n        this.getContext().clear(bounds);\n        return this;\n    };\n    BaseLayer.prototype.setZIndex = function (index) {\n        _super.prototype.setZIndex.call(this, index);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            if (index < stage.getChildren().length - 1) {\n                stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getCanvas()._canvas);\n            }\n        }\n        return this;\n    };\n    BaseLayer.prototype.moveToTop = function () {\n        Node_1.Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage) {\n            stage.content.removeChild(this.getCanvas()._canvas);\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveUp = function () {\n        var moved = Node_1.Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        stage.content.removeChild(this.getCanvas()._canvas);\n        if (this.index < stage.getChildren().length - 1) {\n            stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getCanvas()._canvas);\n        }\n        return true;\n    };\n    BaseLayer.prototype.moveDown = function () {\n        if (Node_1.Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.getChildren();\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.moveToBottom = function () {\n        if (Node_1.Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.getChildren();\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n            }\n            return true;\n        }\n        return false;\n    };\n    BaseLayer.prototype.getLayer = function () {\n        return this;\n    };\n    BaseLayer.prototype.hitGraphEnabled = function () {\n        return true;\n    };\n    BaseLayer.prototype.remove = function () {\n        var _canvas = this.getCanvas()._canvas;\n        Node_1.Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    };\n    BaseLayer.prototype.getStage = function () {\n        return this.parent;\n    };\n    BaseLayer.prototype.setSize = function (_a) {\n        var width = _a.width, height = _a.height;\n        this.canvas.setSize(width, height);\n        return this;\n    };\n    BaseLayer.prototype._toKonvaCanvas = function (config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\n    };\n    BaseLayer.prototype._checkVisibility = function () {\n        var visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    };\n    BaseLayer.prototype._checkSmooth = function () {\n        this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\n    };\n    BaseLayer.prototype.getWidth = function () {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    };\n    BaseLayer.prototype.setWidth = function () {\n        Util_1.Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    };\n    BaseLayer.prototype.getHeight = function () {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    };\n    BaseLayer.prototype.setHeight = function () {\n        Util_1.Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    };\n    BaseLayer.prototype.getIntersection = function (pos, selector) {\n        return null;\n    };\n    BaseLayer.prototype.batchDraw = function () {\n        var _this = this;\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util_1.Util.requestAnimFrame(function () {\n                _this.draw();\n                _this._waitingForDraw = false;\n            });\n        }\n        return this;\n    };\n    BaseLayer.prototype._applyTransform = function (shape, context, top) {\n        var m = shape.getAbsoluteTransform(top).getMatrix();\n        context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    };\n    return BaseLayer;\n}(Container_1.Container));\nexports.BaseLayer = BaseLayer;\nBaseLayer.prototype.nodeType = 'BaseLayer';\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\nUtil_1.Collection.mapMethods(BaseLayer);\n\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$module$node_modules$konva$lib$Factory","~$shadow.js","~$module$node_modules$konva$lib$Container","~$module$node_modules$konva$lib$Canvas","~$module$node_modules$konva$lib$Node","~$module$node_modules$konva$lib$Util"]],"~:properties",["^5",["canvas","width","getWidth","batchDraw","_waitingForDraw","setWidth","prototype","height","_applyTransform","_toKonvaCanvas","_checkVisibility","setHeight","x","__esModule","imageSmoothingEnabled","getHitCanvas","getIntersection","hitGraphEnabled","getLayer","nodeType","value","moveDown","moveToTop","remove","moveUp","_checkSmooth","getHeight","BaseLayer","getContext","y","moveToBottom","__proto__","setSize","setZIndex","createPNGStream","display","getCanvas","clear","getStage","constructor"]],"~:compiled-at",1606342205740,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$konva$lib$BaseLayer.js\",\n\"lineCount\":11,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/konva/lib/BaseLayer.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$konva$lib$BaseLayer\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nvar __extends = (this && this.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar Util_1 = require(\\\"./Util\\\");\\nvar Container_1 = require(\\\"./Container\\\");\\nvar Node_1 = require(\\\"./Node\\\");\\nvar Factory_1 = require(\\\"./Factory\\\");\\nvar Canvas_1 = require(\\\"./Canvas\\\");\\nvar BaseLayer = (function (_super) {\\n    __extends(BaseLayer, _super);\\n    function BaseLayer(config) {\\n        var _this = _super.call(this, config) || this;\\n        _this.canvas = new Canvas_1.SceneCanvas();\\n        _this._waitingForDraw = false;\\n        _this.on('visibleChange', _this._checkVisibility);\\n        _this._checkVisibility();\\n        _this.on('imageSmoothingEnabledChange', _this._checkSmooth);\\n        _this._checkSmooth();\\n        return _this;\\n    }\\n    BaseLayer.prototype.createPNGStream = function () {\\n        var c = this.canvas._canvas;\\n        return c.createPNGStream();\\n    };\\n    BaseLayer.prototype.getCanvas = function () {\\n        return this.canvas;\\n    };\\n    BaseLayer.prototype.getHitCanvas = function () {\\n        return this.hitCanvas;\\n    };\\n    BaseLayer.prototype.getContext = function () {\\n        return this.getCanvas().getContext();\\n    };\\n    BaseLayer.prototype.clear = function (bounds) {\\n        this.getContext().clear(bounds);\\n        return this;\\n    };\\n    BaseLayer.prototype.setZIndex = function (index) {\\n        _super.prototype.setZIndex.call(this, index);\\n        var stage = this.getStage();\\n        if (stage) {\\n            stage.content.removeChild(this.getCanvas()._canvas);\\n            if (index < stage.getChildren().length - 1) {\\n                stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[index + 1].getCanvas()._canvas);\\n            }\\n            else {\\n                stage.content.appendChild(this.getCanvas()._canvas);\\n            }\\n        }\\n        return this;\\n    };\\n    BaseLayer.prototype.moveToTop = function () {\\n        Node_1.Node.prototype.moveToTop.call(this);\\n        var stage = this.getStage();\\n        if (stage) {\\n            stage.content.removeChild(this.getCanvas()._canvas);\\n            stage.content.appendChild(this.getCanvas()._canvas);\\n        }\\n        return true;\\n    };\\n    BaseLayer.prototype.moveUp = function () {\\n        var moved = Node_1.Node.prototype.moveUp.call(this);\\n        if (!moved) {\\n            return false;\\n        }\\n        var stage = this.getStage();\\n        if (!stage) {\\n            return false;\\n        }\\n        stage.content.removeChild(this.getCanvas()._canvas);\\n        if (this.index < stage.getChildren().length - 1) {\\n            stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[this.index + 1].getCanvas()._canvas);\\n        }\\n        else {\\n            stage.content.appendChild(this.getCanvas()._canvas);\\n        }\\n        return true;\\n    };\\n    BaseLayer.prototype.moveDown = function () {\\n        if (Node_1.Node.prototype.moveDown.call(this)) {\\n            var stage = this.getStage();\\n            if (stage) {\\n                var children = stage.getChildren();\\n                stage.content.removeChild(this.getCanvas()._canvas);\\n                stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\\n            }\\n            return true;\\n        }\\n        return false;\\n    };\\n    BaseLayer.prototype.moveToBottom = function () {\\n        if (Node_1.Node.prototype.moveToBottom.call(this)) {\\n            var stage = this.getStage();\\n            if (stage) {\\n                var children = stage.getChildren();\\n                stage.content.removeChild(this.getCanvas()._canvas);\\n                stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\\n            }\\n            return true;\\n        }\\n        return false;\\n    };\\n    BaseLayer.prototype.getLayer = function () {\\n        return this;\\n    };\\n    BaseLayer.prototype.hitGraphEnabled = function () {\\n        return true;\\n    };\\n    BaseLayer.prototype.remove = function () {\\n        var _canvas = this.getCanvas()._canvas;\\n        Node_1.Node.prototype.remove.call(this);\\n        if (_canvas && _canvas.parentNode && Util_1.Util._isInDocument(_canvas)) {\\n            _canvas.parentNode.removeChild(_canvas);\\n        }\\n        return this;\\n    };\\n    BaseLayer.prototype.getStage = function () {\\n        return this.parent;\\n    };\\n    BaseLayer.prototype.setSize = function (_a) {\\n        var width = _a.width, height = _a.height;\\n        this.canvas.setSize(width, height);\\n        return this;\\n    };\\n    BaseLayer.prototype._toKonvaCanvas = function (config) {\\n        config = config || {};\\n        config.width = config.width || this.getWidth();\\n        config.height = config.height || this.getHeight();\\n        config.x = config.x !== undefined ? config.x : this.x();\\n        config.y = config.y !== undefined ? config.y : this.y();\\n        return Node_1.Node.prototype._toKonvaCanvas.call(this, config);\\n    };\\n    BaseLayer.prototype._checkVisibility = function () {\\n        var visible = this.visible();\\n        if (visible) {\\n            this.canvas._canvas.style.display = 'block';\\n        }\\n        else {\\n            this.canvas._canvas.style.display = 'none';\\n        }\\n    };\\n    BaseLayer.prototype._checkSmooth = function () {\\n        this.getContext()._context.imageSmoothingEnabled = this.imageSmoothingEnabled();\\n    };\\n    BaseLayer.prototype.getWidth = function () {\\n        if (this.parent) {\\n            return this.parent.width();\\n        }\\n    };\\n    BaseLayer.prototype.setWidth = function () {\\n        Util_1.Util.warn('Can not change width of layer. Use \\\"stage.width(value)\\\" function instead.');\\n    };\\n    BaseLayer.prototype.getHeight = function () {\\n        if (this.parent) {\\n            return this.parent.height();\\n        }\\n    };\\n    BaseLayer.prototype.setHeight = function () {\\n        Util_1.Util.warn('Can not change height of layer. Use \\\"stage.height(value)\\\" function instead.');\\n    };\\n    BaseLayer.prototype.getIntersection = function (pos, selector) {\\n        return null;\\n    };\\n    BaseLayer.prototype.batchDraw = function () {\\n        var _this = this;\\n        if (!this._waitingForDraw) {\\n            this._waitingForDraw = true;\\n            Util_1.Util.requestAnimFrame(function () {\\n                _this.draw();\\n                _this._waitingForDraw = false;\\n            });\\n        }\\n        return this;\\n    };\\n    BaseLayer.prototype._applyTransform = function (shape, context, top) {\\n        var m = shape.getAbsoluteTransform(top).getMatrix();\\n        context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\\n    };\\n    return BaseLayer;\\n}(Container_1.Container));\\nexports.BaseLayer = BaseLayer;\\nBaseLayer.prototype.nodeType = 'BaseLayer';\\nFactory_1.Factory.addGetterSetter(BaseLayer, 'imageSmoothingEnabled', true);\\nFactory_1.Factory.addGetterSetter(BaseLayer, 'clearBeforeDraw', true);\\nUtil_1.Collection.mapMethods(BaseLayer);\\n\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"__extends\",\"extendStatics\",\"d\",\"b\",\"Object\",\"setPrototypeOf\",\"__proto__\",\"Array\",\"p\",\"hasOwnProperty\",\"__\",\"constructor\",\"prototype\",\"create\",\"defineProperty\",\"value\",\"Util_1\",\"Container_1\",\"Node_1\",\"Factory_1\",\"Canvas_1\",\"BaseLayer\",\"_super\",\"config\",\"_this\",\"call\",\"canvas\",\"SceneCanvas\",\"_waitingForDraw\",\"on\",\"_checkVisibility\",\"_checkSmooth\",\"createPNGStream\",\"BaseLayer.prototype.createPNGStream\",\"_canvas\",\"getCanvas\",\"BaseLayer.prototype.getCanvas\",\"getHitCanvas\",\"BaseLayer.prototype.getHitCanvas\",\"hitCanvas\",\"getContext\",\"BaseLayer.prototype.getContext\",\"clear\",\"BaseLayer.prototype.clear\",\"bounds\",\"setZIndex\",\"BaseLayer.prototype.setZIndex\",\"index\",\"stage\",\"getStage\",\"content\",\"removeChild\",\"getChildren\",\"length\",\"insertBefore\",\"appendChild\",\"moveToTop\",\"BaseLayer.prototype.moveToTop\",\"Node\",\"moveUp\",\"BaseLayer.prototype.moveUp\",\"moved\",\"moveDown\",\"BaseLayer.prototype.moveDown\",\"children\",\"moveToBottom\",\"BaseLayer.prototype.moveToBottom\",\"getLayer\",\"BaseLayer.prototype.getLayer\",\"hitGraphEnabled\",\"BaseLayer.prototype.hitGraphEnabled\",\"remove\",\"BaseLayer.prototype.remove\",\"parentNode\",\"Util\",\"_isInDocument\",\"BaseLayer.prototype.getStage\",\"parent\",\"setSize\",\"BaseLayer.prototype.setSize\",\"_a\",\"width\",\"height\",\"_toKonvaCanvas\",\"BaseLayer.prototype._toKonvaCanvas\",\"getWidth\",\"getHeight\",\"x\",\"undefined\",\"y\",\"BaseLayer.prototype._checkVisibility\",\"visible\",\"style\",\"display\",\"BaseLayer.prototype._checkSmooth\",\"_context\",\"imageSmoothingEnabled\",\"BaseLayer.prototype.getWidth\",\"setWidth\",\"BaseLayer.prototype.setWidth\",\"warn\",\"BaseLayer.prototype.getHeight\",\"setHeight\",\"BaseLayer.prototype.setHeight\",\"getIntersection\",\"BaseLayer.prototype.getIntersection\",\"pos\",\"selector\",\"batchDraw\",\"BaseLayer.prototype.batchDraw\",\"requestAnimFrame\",\"draw\",\"_applyTransform\",\"BaseLayer.prototype._applyTransform\",\"shape\",\"context\",\"top\",\"m\",\"getAbsoluteTransform\",\"getMatrix\",\"transform\",\"Container\",\"nodeType\",\"Factory\",\"addGetterSetter\",\"Collection\",\"mapMethods\"]\n}\n"]