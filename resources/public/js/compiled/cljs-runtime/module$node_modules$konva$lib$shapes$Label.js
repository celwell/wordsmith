shadow$provide.module$node_modules$konva$lib$shapes$Label=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):
(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$konva$lib$Util");module=require("module$node_modules$konva$lib$Factory");var Shape_1=require("module$node_modules$konva$lib$Shape"),Group_1=require("module$node_modules$konva$lib$Group"),Validators_1=require("module$node_modules$konva$lib$Validators");require=require("module$node_modules$konva$lib$Global");var ATTR_CHANGE_LIST="fontFamily fontSize fontStyle padding lineHeight text width".split(" "),
attrChangeListLen=ATTR_CHANGE_LIST.length;Group_1=function(_super){function Label(config){config=_super.call(this,config)||this;config.on("add.konva",function(evt){this._addListeners(evt.child);this._sync()});return config}__extends(Label,_super);Label.prototype.getText=function(){return this.find("Text")[0]};Label.prototype.getTag=function(){return this.find("Tag")[0]};Label.prototype._addListeners=function(text){var that=this,n,func=function(){that._sync()};for(n=0;n<attrChangeListLen;n++)text.on(ATTR_CHANGE_LIST[n]+
"Change.konva",func)};Label.prototype.getWidth=function(){return this.getText().width()};Label.prototype.getHeight=function(){return this.getText().height()};Label.prototype._sync=function(){var text=this.getText(),tag=this.getTag(),x;if(text&&tag){var width=text.width();var height=text.height();var pointerDirection=tag.pointerDirection();var pointerWidth=tag.pointerWidth();var pointerHeight=tag.pointerHeight();var y=x=0;switch(pointerDirection){case "up":x=width/2;y=-1*pointerHeight;break;case "right":x=
width+pointerWidth;y=height/2;break;case "down":x=width/2;y=height+pointerHeight;break;case "left":x=-1*pointerWidth,y=height/2}tag.setAttrs({x:-1*x,y:-1*y,width:width,height:height});text.setAttrs({x:-1*x,y:-1*y})}};return Label}(Group_1.Group);exports.Label=Group_1;Group_1.prototype.className="Label";require._registerNode(Group_1);global.Collection.mapMethods(Group_1);Shape_1=function(_super){function Tag(){return null!==_super&&_super.apply(this,arguments)||this}__extends(Tag,_super);Tag.prototype._sceneFunc=
function(context){var width=this.width(),height=this.height(),pointerDirection=this.pointerDirection(),pointerWidth=this.pointerWidth(),pointerHeight=this.pointerHeight(),cornerRadius=Math.min(this.cornerRadius(),width/2,height/2);context.beginPath();cornerRadius?context.moveTo(cornerRadius,0):context.moveTo(0,0);"up"===pointerDirection&&(context.lineTo((width-pointerWidth)/2,0),context.lineTo(width/2,-1*pointerHeight),context.lineTo((width+pointerWidth)/2,0));cornerRadius?(context.lineTo(width-cornerRadius,
0),context.arc(width-cornerRadius,cornerRadius,cornerRadius,3*Math.PI/2,0,!1)):context.lineTo(width,0);"right"===pointerDirection&&(context.lineTo(width,(height-pointerHeight)/2),context.lineTo(width+pointerWidth,height/2),context.lineTo(width,(height+pointerHeight)/2));cornerRadius?(context.lineTo(width,height-cornerRadius),context.arc(width-cornerRadius,height-cornerRadius,cornerRadius,0,Math.PI/2,!1)):context.lineTo(width,height);"down"===pointerDirection&&(context.lineTo((width+pointerWidth)/
2,height),context.lineTo(width/2,height+pointerHeight),context.lineTo((width-pointerWidth)/2,height));cornerRadius?(context.lineTo(cornerRadius,height),context.arc(cornerRadius,height-cornerRadius,cornerRadius,Math.PI/2,Math.PI,!1)):context.lineTo(0,height);"left"===pointerDirection&&(context.lineTo(0,(height+pointerHeight)/2),context.lineTo(-1*pointerWidth,height/2),context.lineTo(0,(height-pointerHeight)/2));cornerRadius&&(context.lineTo(0,cornerRadius),context.arc(cornerRadius,cornerRadius,cornerRadius,
Math.PI,3*Math.PI/2,!1));context.closePath();context.fillStrokeShape(this)};Tag.prototype.getSelfRect=function(){var x=0,y=0,pointerWidth=this.pointerWidth(),pointerHeight=this.pointerHeight(),direction=this.pointerDirection(),width=this.width(),height=this.height();"up"===direction?(y-=pointerHeight,height+=pointerHeight):"down"===direction?height+=pointerHeight:"left"===direction?(x-=1.5*pointerWidth,width+=pointerWidth):"right"===direction&&(width+=1.5*pointerWidth);return{x:x,y:y,width:width,
height:height}};return Tag}(Shape_1.Shape);exports.Tag=Shape_1;Shape_1.prototype.className="Tag";require._registerNode(Shape_1);module.Factory.addGetterSetter(Shape_1,"pointerDirection","none");module.Factory.addGetterSetter(Shape_1,"pointerWidth",0,Validators_1.getNumberValidator());module.Factory.addGetterSetter(Shape_1,"pointerHeight",0,Validators_1.getNumberValidator());module.Factory.addGetterSetter(Shape_1,"cornerRadius",0,Validators_1.getNumberValidator());global.Collection.mapMethods(Shape_1)}
//# sourceMappingURL=module$node_modules$konva$lib$shapes$Label.js.map
