shadow$provide.module$node_modules$konva$lib$Container=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):
(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Util_1=require("module$node_modules$konva$lib$Util");global=require("module$node_modules$konva$lib$Factory");var Node_1=require("module$node_modules$konva$lib$Node"),DragAndDrop_1=require("module$node_modules$konva$lib$DragAndDrop");module=require("module$node_modules$konva$lib$Validators");var Global_1=require("module$node_modules$konva$lib$Global");require=function(_super){function Container(){var _this=
null!==_super&&_super.apply(this,arguments)||this;_this.children=new Util_1.Collection;return _this}__extends(Container,_super);Container.prototype.getChildren=function(filterFunc){if(!filterFunc)return this.children;var results=new Util_1.Collection;this.children.each(function(child){filterFunc(child)&&results.push(child)});return results};Container.prototype.hasChildren=function(){return 0<this.getChildren().length};Container.prototype.removeChildren=function(){for(var child,i=0;i<this.children.length;i++)child=
this.children[i],child.parent=null,child.index=0,child.remove();this.children=new Util_1.Collection;return this};Container.prototype.destroyChildren=function(){for(var child,i=0;i<this.children.length;i++)child=this.children[i],child.parent=null,child.index=0,child.destroy();this.children=new Util_1.Collection;return this};Container.prototype.add=function(child){if(1<arguments.length){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}if(child.getParent())return child.moveTo(this),
this;i=this.children;this._validateAdd(child);child.index=i.length;child.parent=this;i.push(child);this._fire("add",{child:child});return this};Container.prototype.destroy=function(){this.hasChildren()&&this.destroyChildren();_super.prototype.destroy.call(this);return this};Container.prototype.find=function(selector){return this._generalFind(selector,!1)};Container.prototype.get=function(selector){Util_1.Util.warn("collection.get() method is deprecated. Please use collection.find() instead.");return this.find(selector)};
Container.prototype.findOne=function(selector){selector=this._generalFind(selector,!0);return 0<selector.length?selector[0]:void 0};Container.prototype._generalFind=function(selector,findOne){var retArr=[];this._descendants(function(node){var valid=node._isMatch(selector);valid&&retArr.push(node);return valid&&findOne?!0:!1});return Util_1.Collection.toCollection(retArr)};Container.prototype._descendants=function(fn){for(var shouldStop,i=0;i<this.children.length;i++){var child=this.children[i];if((shouldStop=
fn(child))||child.hasChildren()&&(shouldStop=child._descendants(fn)))return!0}return!1};Container.prototype.toObject=function(){var obj=Node_1.Node.prototype.toObject.call(this);obj.children=[];for(var children=this.getChildren(),len=children.length,n=0;n<len;n++)obj.children.push(children[n].toObject());return obj};Container.prototype._getDescendants=function(arr){for(var retArr=[],len=arr.length,n=0;n<len;n++){var node=arr[n];this.isAncestorOf(node)&&retArr.push(node)}return retArr};Container.prototype.isAncestorOf=
function(node){for(node=node.getParent();node;){if(node._id===this._id)return!0;node=node.getParent()}return!1};Container.prototype.clone=function(obj){var node=Node_1.Node.prototype.clone.call(this,obj);this.getChildren().each(function(no){node.add(no.clone())});return node};Container.prototype.getAllIntersections=function(pos){var arr=[];this.find("Shape").each(function(shape){shape.isVisible()&&shape.intersects(pos)&&arr.push(shape)});return arr};Container.prototype._setChildrenIndices=function(){this.children.each(function(child,
n){child.index=n})};Container.prototype.drawScene=function(can,top,caching){var layer=this.getLayer(),context=(can=can||layer&&layer.getCanvas())&&can.getContext(),cachedCanvas=this._getCanvasCache();cachedCanvas=cachedCanvas&&cachedCanvas.scene;if(this.isVisible()||caching)!caching&&cachedCanvas?(context.save(),layer._applyTransform(this,context,top),this._drawCachedSceneCanvas(context),context.restore()):this._drawChildren(can,"drawScene",top,!1,caching,caching);return this};Container.prototype.drawHit=
function(can,top,caching){var layer=this.getLayer(),context=(can=can||layer&&layer.hitCanvas)&&can.getContext(),cachedCanvas=this._getCanvasCache();cachedCanvas=cachedCanvas&&cachedCanvas.hit;if(this.shouldDrawHit(can)||caching)!caching&&cachedCanvas?(context.save(),layer._applyTransform(this,context,top),this._drawCachedHitCanvas(context),context.restore()):this._drawChildren(can,"drawHit",top,!1,caching,caching);return this};Container.prototype._drawChildren=function(canvas,drawMethod,top,caching,
skipBuffer,skipComposition){var layer=this.getLayer(),context=canvas&&canvas.getContext(),clipWidth=this.clipWidth(),clipHeight=this.clipHeight(),clipFunc=this.clipFunc(),hasClip=clipWidth&&clipHeight||clipFunc;if(hasClip&&layer){context.save();var transform=this.getAbsoluteTransform(top);var clipY=transform.getMatrix();context.transform(clipY[0],clipY[1],clipY[2],clipY[3],clipY[4],clipY[5]);context.beginPath();clipFunc?clipFunc.call(this,context,this):(clipFunc=this.clipX(),clipY=this.clipY(),context.rect(clipFunc,
clipY,clipWidth,clipHeight));context.clip();clipY=transform.copy().invert().getMatrix();context.transform(clipY[0],clipY[1],clipY[2],clipY[3],clipY[4],clipY[5])}(skipComposition="source-over"!==this.globalCompositeOperation()&&!skipComposition)&&layer&&(context.save(),context._applyGlobalCompositeOperation(this));this.children.each(function(child){child[drawMethod](canvas,top,caching,skipBuffer)});skipComposition&&layer&&context.restore();hasClip&&layer&&context.restore()};Container.prototype.shouldDrawHit=
function(canvas){if(canvas&&canvas.isCache)return!0;var layer=this.getLayer(),layerUnderDrag=!1;DragAndDrop_1.DD._dragElements.forEach(function(elem){"dragging"===elem.dragStatus&&elem.node.getLayer()===layer&&(layerUnderDrag=!0)});canvas=!Global_1.Konva.hitOnDragEnabled&&layerUnderDrag;return layer&&layer.hitGraphEnabled()&&this.isVisible()&&!canvas};Container.prototype.getClientRect=function(attrs){attrs=attrs||{};var skipTransform=attrs.skipTransform,relativeTo=attrs.relativeTo,minX,minY,maxX,
maxY,selfRect={x:Infinity,y:Infinity,width:0,height:0},that=this;this.children.each(function(child){child.visible()&&(child=child.getClientRect({relativeTo:that,skipShadow:attrs.skipShadow,skipStroke:attrs.skipStroke}),0!==child.width||0!==child.height)&&(void 0===minX?(minX=child.x,minY=child.y,maxX=child.x+child.width,maxY=child.y+child.height):(minX=Math.min(minX,child.x),minY=Math.min(minY,child.y),maxX=Math.max(maxX,child.x+child.width),maxY=Math.max(maxY,child.y+child.height)))});selfRect=this.find("Shape");
for(var hasVisible=!1,i=0;i<selfRect.length;i++)if(selfRect[i]._isVisible(this)){hasVisible=!0;break}selfRect=hasVisible?{x:minX,y:minY,width:maxX-minX,height:maxY-minY}:{x:0,y:0,width:0,height:0};return skipTransform?selfRect:this._transformedRect(selfRect,relativeTo)};return Container}(Node_1.Node);exports.Container=require;global.Factory.addComponentsGetterSetter(require,"clip",["x","y","width","height"]);global.Factory.addGetterSetter(require,"clipX",void 0,module.getNumberValidator());global.Factory.addGetterSetter(require,
"clipY",void 0,module.getNumberValidator());global.Factory.addGetterSetter(require,"clipWidth",void 0,module.getNumberValidator());global.Factory.addGetterSetter(require,"clipHeight",void 0,module.getNumberValidator());global.Factory.addGetterSetter(require,"clipFunc");Util_1.Collection.mapMethods(require)}
//# sourceMappingURL=module$node_modules$konva$lib$Container.js.map
