shadow$provide.module$node_modules$konva$lib$filters$Emboss=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});global=require("module$node_modules$konva$lib$Factory");module=require("module$node_modules$konva$lib$Node");var Util_1=require("module$node_modules$konva$lib$Util");require=require("module$node_modules$konva$lib$Validators");exports.Emboss=function(imageData){var strength=10*this.embossStrength(),greyLevel=255*this.embossWhiteLevel(),direction=
this.embossDirection(),blend=this.embossBlend(),dirY=0,dirX=0,data=imageData.data,w=imageData.width;imageData=imageData.height;var w4=4*w,y=imageData;switch(direction){case "top-left":dirX=dirY=-1;break;case "top":dirY=-1;dirX=0;break;case "top-right":dirY=-1;dirX=1;break;case "right":dirY=0;dirX=1;break;case "bottom-right":dirX=dirY=1;break;case "bottom":dirY=1;dirX=0;break;case "bottom-left":dirY=1;dirX=-1;break;case "left":dirY=0;dirX=-1;break;default:Util_1.Util.error("Unknown emboss direction: "+
direction)}do{direction=(y-1)*w4;var otherY=dirY;1>y+otherY&&(otherY=0);y+otherY>imageData&&(otherY=0);otherY=(y-1+otherY)*w*4;var x=w;do{var offset=direction+4*(x-1),otherX=dirX;1>x+otherX&&(otherX=0);x+otherX>w&&(otherX=0);otherX=otherY+4*(x-1+otherX);var dG=data[offset+1]-data[otherX+1],dB=data[offset+2]-data[otherX+2];otherX=data[offset]-data[otherX];var absDif=0<otherX?otherX:-otherX,absB=0<dB?dB:-dB;(0<dG?dG:-dG)>absDif&&(otherX=dG);absB>absDif&&(otherX=dB);otherX*=strength;blend?(dG=data[offset]+
otherX,dB=data[offset+1]+otherX,otherX=data[offset+2]+otherX,data[offset]=255<dG?255:0>dG?0:dG,data[offset+1]=255<dB?255:0>dB?0:dB,data[offset+2]=255<otherX?255:0>otherX?0:otherX):(otherX=greyLevel-otherX,0>otherX?otherX=0:255<otherX&&(otherX=255),data[offset]=data[offset+1]=data[offset+2]=otherX)}while(--x)}while(--y)};global.Factory.addGetterSetter(module.Node,"embossStrength",.5,require.getNumberValidator(),global.Factory.afterSetFilter);global.Factory.addGetterSetter(module.Node,"embossWhiteLevel",
.5,require.getNumberValidator(),global.Factory.afterSetFilter);global.Factory.addGetterSetter(module.Node,"embossDirection","top-left",null,global.Factory.afterSetFilter);global.Factory.addGetterSetter(module.Node,"embossBlend",!1,null,global.Factory.afterSetFilter)}
//# sourceMappingURL=module$node_modules$konva$lib$filters$Emboss.js.map
