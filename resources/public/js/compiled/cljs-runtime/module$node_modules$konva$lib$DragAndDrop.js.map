{
"version":3,
"file":"module$node_modules$konva$lib$DragAndDrop.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/konva/lib/DragAndDrop.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$konva$lib$DragAndDrop\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Global_1 = require(\"./Global\");\nvar Util_1 = require(\"./Util\");\nexports.DD = {\n    get isDragging() {\n        var flag = false;\n        exports.DD._dragElements.forEach(function (elem) {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        exports.DD._dragElements.forEach(function (elem) {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util_1.Util._getFirstPointerId(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt: evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt\n            }, true);\n        });\n    },\n    _endDragBefore: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            var node = elem.node;\n            var stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            var pos = stage._changedPointerPositions.find(function (pos) { return pos.id === elem.pointerId; });\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging') {\n                exports.DD.justDragged = true;\n                Global_1.Konva.listenClickTap = false;\n                elem.dragStatus = 'stopped';\n            }\n            var drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Global_1.Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.draw();\n            }\n        });\n    },\n    _endDragAfter: function (evt) {\n        exports.DD._dragElements.forEach(function (elem, key) {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                exports.DD._dragElements.delete(key);\n            }\n        });\n    }\n};\nif (Global_1.Konva.isBrowser) {\n    window.addEventListener('mouseup', exports.DD._endDragBefore, true);\n    window.addEventListener('touchend', exports.DD._endDragBefore, true);\n    window.addEventListener('mousemove', exports.DD._drag);\n    window.addEventListener('touchmove', exports.DD._drag);\n    window.addEventListener('mouseup', exports.DD._endDragAfter, false);\n    window.addEventListener('touchend', exports.DD._endDragAfter, false);\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","Global_1","Util_1","DD","isDragging","flag","_dragElements","forEach","elem","dragStatus","justDragged","node","Map","_drag","evt","key","stage","getStage","setPointersPositions","undefined","pointerId","Util","_getFirstPointerId","pos","_changedPointerPositions","find","id","dragDistance","Math","max","distance","abs","x","startPointerPos","y","startDrag","_setDragPosition","fire","type","target","_endDragBefore","Konva","listenClickTap","drawNode","getLayer","draw","_endDragAfter","delete","isBrowser","window","addEventListener"]
}
