shadow$provide.module$node_modules$konva$lib$BaseLayer=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):
(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Util_1=require("module$node_modules$konva$lib$Util");module=require("module$node_modules$konva$lib$Container");var Node_1=require("module$node_modules$konva$lib$Node");global=require("module$node_modules$konva$lib$Factory");var Canvas_1=require("module$node_modules$konva$lib$Canvas");require=function(_super){function BaseLayer(config){config=_super.call(this,config)||this;config.canvas=new Canvas_1.SceneCanvas;
config._waitingForDraw=!1;config.on("visibleChange",config._checkVisibility);config._checkVisibility();config.on("imageSmoothingEnabledChange",config._checkSmooth);config._checkSmooth();return config}__extends(BaseLayer,_super);BaseLayer.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()};BaseLayer.prototype.getCanvas=function(){return this.canvas};BaseLayer.prototype.getHitCanvas=function(){return this.hitCanvas};BaseLayer.prototype.getContext=function(){return this.getCanvas().getContext()};
BaseLayer.prototype.clear=function(bounds){this.getContext().clear(bounds);return this};BaseLayer.prototype.setZIndex=function(index){_super.prototype.setZIndex.call(this,index);var stage=this.getStage();stage&&(stage.content.removeChild(this.getCanvas()._canvas),index<stage.getChildren().length-1?stage.content.insertBefore(this.getCanvas()._canvas,stage.getChildren()[index+1].getCanvas()._canvas):stage.content.appendChild(this.getCanvas()._canvas));return this};BaseLayer.prototype.moveToTop=function(){Node_1.Node.prototype.moveToTop.call(this);
var stage=this.getStage();stage&&(stage.content.removeChild(this.getCanvas()._canvas),stage.content.appendChild(this.getCanvas()._canvas));return!0};BaseLayer.prototype.moveUp=function(){if(!Node_1.Node.prototype.moveUp.call(this))return!1;var stage=this.getStage();if(!stage)return!1;stage.content.removeChild(this.getCanvas()._canvas);this.index<stage.getChildren().length-1?stage.content.insertBefore(this.getCanvas()._canvas,stage.getChildren()[this.index+1].getCanvas()._canvas):stage.content.appendChild(this.getCanvas()._canvas);
return!0};BaseLayer.prototype.moveDown=function(){if(Node_1.Node.prototype.moveDown.call(this)){var stage=this.getStage();if(stage){var children=stage.getChildren();stage.content.removeChild(this.getCanvas()._canvas);stage.content.insertBefore(this.getCanvas()._canvas,children[this.index+1].getCanvas()._canvas)}return!0}return!1};BaseLayer.prototype.moveToBottom=function(){if(Node_1.Node.prototype.moveToBottom.call(this)){var stage=this.getStage();if(stage){var children=stage.getChildren();stage.content.removeChild(this.getCanvas()._canvas);
stage.content.insertBefore(this.getCanvas()._canvas,children[1].getCanvas()._canvas)}return!0}return!1};BaseLayer.prototype.getLayer=function(){return this};BaseLayer.prototype.hitGraphEnabled=function(){return!0};BaseLayer.prototype.remove=function(){var _canvas=this.getCanvas()._canvas;Node_1.Node.prototype.remove.call(this);_canvas&&_canvas.parentNode&&Util_1.Util._isInDocument(_canvas)&&_canvas.parentNode.removeChild(_canvas);return this};BaseLayer.prototype.getStage=function(){return this.parent};
BaseLayer.prototype.setSize=function(_a){this.canvas.setSize(_a.width,_a.height);return this};BaseLayer.prototype._toKonvaCanvas=function(config){config=config||{};config.width=config.width||this.getWidth();config.height=config.height||this.getHeight();config.x=void 0!==config.x?config.x:this.x();config.y=void 0!==config.y?config.y:this.y();return Node_1.Node.prototype._toKonvaCanvas.call(this,config)};BaseLayer.prototype._checkVisibility=function(){this.visible()?this.canvas._canvas.style.display=
"block":this.canvas._canvas.style.display="none"};BaseLayer.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()};BaseLayer.prototype.getWidth=function(){if(this.parent)return this.parent.width()};BaseLayer.prototype.setWidth=function(){Util_1.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')};BaseLayer.prototype.getHeight=function(){if(this.parent)return this.parent.height()};BaseLayer.prototype.setHeight=
function(){Util_1.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')};BaseLayer.prototype.getIntersection=function(pos,selector){return null};BaseLayer.prototype.batchDraw=function(){var _this=this;this._waitingForDraw||(this._waitingForDraw=!0,Util_1.Util.requestAnimFrame(function(){_this.draw();_this._waitingForDraw=!1}));return this};BaseLayer.prototype._applyTransform=function(shape,context,top){shape=shape.getAbsoluteTransform(top).getMatrix();context.transform(shape[0],
shape[1],shape[2],shape[3],shape[4],shape[5])};return BaseLayer}(module.Container);exports.BaseLayer=require;require.prototype.nodeType="BaseLayer";global.Factory.addGetterSetter(require,"imageSmoothingEnabled",!0);global.Factory.addGetterSetter(require,"clearBeforeDraw",!0);Util_1.Collection.mapMethods(require)}
//# sourceMappingURL=module$node_modules$konva$lib$BaseLayer.js.map
