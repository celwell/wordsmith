shadow$provide.module$node_modules$konva$lib$Context=function(global,require,module,exports){var __extends=this&&this.__extends||function(){var extendStatics=function(d$jscomp$0,b$jscomp$0){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return extendStatics(d$jscomp$0,b$jscomp$0)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b);d.prototype=null===b?Object.create(b):
(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Util_1=require("module$node_modules$konva$lib$Util"),Global_1=require("module$node_modules$konva$lib$Global"),CONTEXT_METHODS="arc arcTo beginPath bezierCurveTo clearRect clip closePath createLinearGradient createPattern createRadialGradient drawImage ellipse fill fillText getImageData createImageData lineTo moveTo putImageData quadraticCurveTo rect restore rotate save scale setLineDash setTransform stroke strokeText transform translate".split(" "),
Context$jscomp$0=function(){function Context(canvas){this.canvas=canvas;this._context=canvas._canvas.getContext("2d");Global_1.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}Context.prototype.fillShape=function(shape){shape.getFillEnabled()&&this._fill(shape)};Context.prototype._fill=function(shape){};Context.prototype.strokeShape=function(shape){shape.getStrokeEnabled()&&this._stroke(shape)};Context.prototype._stroke=function(shape){};Context.prototype.fillStrokeShape=function(shape){shape.getFillEnabled()&&
this._fill(shape);shape.getStrokeEnabled()&&this._stroke(shape)};Context.prototype.getTrace=function(relaxed){var traceArr=this.traceArr,len=traceArr.length,str="",n,method;for(n=0;n<len;n++){var trace=traceArr[n];(method=trace.method)?(trace=trace.args,str+=method,str=relaxed?str+"()":Util_1.Util._isArray(trace[0])?str+("(["+trace.join(",")+"])"):str+("("+trace.join(",")+")")):(str+=trace.property,relaxed||(str+="\x3d"+trace.val));str+=";"}return str};Context.prototype.clearTrace=function(){this.traceArr=
[]};Context.prototype._trace=function(str){var traceArr=this.traceArr;traceArr.push(str);100<=traceArr.length&&traceArr.shift()};Context.prototype.reset=function(){var pixelRatio=this.getCanvas().getPixelRatio();this.setTransform(1*pixelRatio,0,0,1*pixelRatio,0,0)};Context.prototype.getCanvas=function(){return this.canvas};Context.prototype.clear=function(bounds){var canvas=this.getCanvas();bounds?this.clearRect(bounds.x||0,bounds.y||0,bounds.width||0,bounds.height||0):this.clearRect(0,0,canvas.getWidth()/
canvas.pixelRatio,canvas.getHeight()/canvas.pixelRatio)};Context.prototype._applyLineCap=function(shape){(shape=shape.getLineCap())&&this.setAttr("lineCap",shape)};Context.prototype._applyOpacity=function(shape){shape=shape.getAbsoluteOpacity();1!==shape&&this.setAttr("globalAlpha",shape)};Context.prototype._applyLineJoin=function(shape){(shape=shape.getLineJoin())&&this.setAttr("lineJoin",shape)};Context.prototype.setAttr=function(attr,val){this._context[attr]=val};Context.prototype.arc=function(a0,
a1,a2,a3,a4,a5){this._context.arc(a0,a1,a2,a3,a4,a5)};Context.prototype.arcTo=function(a0,a1,a2,a3,a4){this._context.arcTo(a0,a1,a2,a3,a4)};Context.prototype.beginPath=function(){this._context.beginPath()};Context.prototype.bezierCurveTo=function(a0,a1,a2,a3,a4,a5){this._context.bezierCurveTo(a0,a1,a2,a3,a4,a5)};Context.prototype.clearRect=function(a0,a1,a2,a3){this._context.clearRect(a0,a1,a2,a3)};Context.prototype.clip=function(){this._context.clip()};Context.prototype.closePath=function(){this._context.closePath()};
Context.prototype.createImageData=function(a0,a1){var a=arguments;if(2===a.length)return this._context.createImageData(a0,a1);if(1===a.length)return this._context.createImageData(a0)};Context.prototype.createLinearGradient=function(a0,a1,a2,a3){return this._context.createLinearGradient(a0,a1,a2,a3)};Context.prototype.createPattern=function(a0,a1){return this._context.createPattern(a0,a1)};Context.prototype.createRadialGradient=function(a0,a1,a2,a3,a4,a5){return this._context.createRadialGradient(a0,
a1,a2,a3,a4,a5)};Context.prototype.drawImage=function(a0,a1,a2,a3,a4,a5,a6,a7,a8){var a=arguments,_context=this._context;3===a.length?_context.drawImage(a0,a1,a2):5===a.length?_context.drawImage(a0,a1,a2,a3,a4):9===a.length&&_context.drawImage(a0,a1,a2,a3,a4,a5,a6,a7,a8)};Context.prototype.ellipse=function(a0,a1,a2,a3,a4,a5,a6,a7){this._context.ellipse(a0,a1,a2,a3,a4,a5,a6,a7)};Context.prototype.isPointInPath=function(x,y){return this._context.isPointInPath(x,y)};Context.prototype.fill=function(){this._context.fill()};
Context.prototype.fillRect=function(x,y,width,height){this._context.fillRect(x,y,width,height)};Context.prototype.strokeRect=function(x,y,width,height){this._context.strokeRect(x,y,width,height)};Context.prototype.fillText=function(a0,a1,a2){this._context.fillText(a0,a1,a2)};Context.prototype.measureText=function(text){return this._context.measureText(text)};Context.prototype.getImageData=function(a0,a1,a2,a3){return this._context.getImageData(a0,a1,a2,a3)};Context.prototype.lineTo=function(a0,a1){this._context.lineTo(a0,
a1)};Context.prototype.moveTo=function(a0,a1){this._context.moveTo(a0,a1)};Context.prototype.rect=function(a0,a1,a2,a3){this._context.rect(a0,a1,a2,a3)};Context.prototype.putImageData=function(a0,a1,a2){this._context.putImageData(a0,a1,a2)};Context.prototype.quadraticCurveTo=function(a0,a1,a2,a3){this._context.quadraticCurveTo(a0,a1,a2,a3)};Context.prototype.restore=function(){this._context.restore()};Context.prototype.rotate=function(a0){this._context.rotate(a0)};Context.prototype.save=function(){this._context.save()};
Context.prototype.scale=function(a0,a1){this._context.scale(a0,a1)};Context.prototype.setLineDash=function(a0){this._context.setLineDash?this._context.setLineDash(a0):"mozDash"in this._context?this._context.mozDash=a0:"webkitLineDash"in this._context&&(this._context.webkitLineDash=a0)};Context.prototype.getLineDash=function(){return this._context.getLineDash()};Context.prototype.setTransform=function(a0,a1,a2,a3,a4,a5){this._context.setTransform(a0,a1,a2,a3,a4,a5)};Context.prototype.stroke=function(){this._context.stroke()};
Context.prototype.strokeText=function(a0,a1,a2,a3){this._context.strokeText(a0,a1,a2,a3)};Context.prototype.transform=function(a0,a1,a2,a3,a4,a5){this._context.transform(a0,a1,a2,a3,a4,a5)};Context.prototype.translate=function(a0,a1){this._context.translate(a0,a1)};Context.prototype._enableTrace=function(){var that=this,len=CONTEXT_METHODS.length,_simplifyArray=Util_1.Util._simplifyArray,origSetter=this.setAttr,n,args,func=function(methodName){var origMethod=that[methodName],ret;that[methodName]=
function(){args=_simplifyArray(Array.prototype.slice.call(arguments,0));ret=origMethod.apply(that,arguments);that._trace({method:methodName,args:args});return ret}};for(n=0;n<len;n++)func(CONTEXT_METHODS[n]);that.setAttr=function(){origSetter.apply(that,arguments);var prop=arguments[0],val=arguments[1];if("shadowOffsetX"===prop||"shadowOffsetY"===prop||"shadowBlur"===prop)val/=this.canvas.getPixelRatio();that._trace({property:prop,val:val})}};Context.prototype._applyGlobalCompositeOperation=function(node){node=
node.getGlobalCompositeOperation();"source-over"!==node&&this.setAttr("globalCompositeOperation",node)};return Context}();exports.Context=Context$jscomp$0;"fillStyle strokeStyle shadowColor shadowBlur shadowOffsetX shadowOffsetY lineCap lineDashOffset lineJoin lineWidth miterLimit font textAlign textBaseline globalAlpha globalCompositeOperation imageSmoothingEnabled".split(" ").forEach(function(prop){Object.defineProperty(Context$jscomp$0.prototype,prop,{get:function(){return this._context[prop]},
set:function(val){this._context[prop]=val}})});global=function(_super){function SceneContext(){return null!==_super&&_super.apply(this,arguments)||this}__extends(SceneContext,_super);SceneContext.prototype._fillColor=function(shape){var fill=shape.fill();this.setAttr("fillStyle",fill);shape._fillFunc(this)};SceneContext.prototype._fillPattern=function(shape){var fillPatternX=shape.getFillPatternX(),fillPatternY=shape.getFillPatternY(),fillPatternRotation=Global_1.Konva.getAngle(shape.getFillPatternRotation()),
fillPatternOffsetX=shape.getFillPatternOffsetX(),fillPatternOffsetY=shape.getFillPatternOffsetY(),fillPatternScaleX=shape.getFillPatternScaleX(),fillPatternScaleY=shape.getFillPatternScaleY();(fillPatternX||fillPatternY)&&this.translate(fillPatternX||0,fillPatternY||0);fillPatternRotation&&this.rotate(fillPatternRotation);(fillPatternScaleX||fillPatternScaleY)&&this.scale(fillPatternScaleX,fillPatternScaleY);(fillPatternOffsetX||fillPatternOffsetY)&&this.translate(-1*fillPatternOffsetX,-1*fillPatternOffsetY);
this.setAttr("fillStyle",shape._getFillPattern());shape._fillFunc(this)};SceneContext.prototype._fillLinearGradient=function(shape){var grd=shape._getLinearGradient();grd&&(this.setAttr("fillStyle",grd),shape._fillFunc(this))};SceneContext.prototype._fillRadialGradient=function(shape){var grd=shape._getRadialGradient();grd&&(this.setAttr("fillStyle",grd),shape._fillFunc(this))};SceneContext.prototype._fill=function(shape){var hasColor=shape.fill(),fillPriority=shape.getFillPriority();if(hasColor&&
"color"===fillPriority)this._fillColor(shape);else{var hasPattern=shape.getFillPatternImage();if(hasPattern&&"pattern"===fillPriority)this._fillPattern(shape);else{var hasLinearGradient=shape.getFillLinearGradientColorStops();if(hasLinearGradient&&"linear-gradient"===fillPriority)this._fillLinearGradient(shape);else{var hasRadialGradient=shape.getFillRadialGradientColorStops();hasRadialGradient&&"radial-gradient"===fillPriority?this._fillRadialGradient(shape):hasColor?this._fillColor(shape):hasPattern?
this._fillPattern(shape):hasLinearGradient?this._fillLinearGradient(shape):hasRadialGradient&&this._fillRadialGradient(shape)}}}};SceneContext.prototype._strokeLinearGradient=function(shape){var start=shape.getStrokeLinearGradientStartPoint(),end=shape.getStrokeLinearGradientEndPoint();shape=shape.getStrokeLinearGradientColorStops();start=this.createLinearGradient(start.x,start.y,end.x,end.y);if(shape){for(end=0;end<shape.length;end+=2)start.addColorStop(shape[end],shape[end+1]);this.setAttr("strokeStyle",
start)}};SceneContext.prototype._stroke=function(shape){var dash=shape.dash(),strokeScaleEnabled=shape.getStrokeScaleEnabled();if(shape.hasStroke()){if(!strokeScaleEnabled){this.save();var pixelRatio=this.getCanvas().getPixelRatio();this.setTransform(pixelRatio,0,0,pixelRatio,0,0)}this._applyLineCap(shape);dash&&shape.dashEnabled()&&(this.setLineDash(dash),this.setAttr("lineDashOffset",shape.dashOffset()));this.setAttr("lineWidth",shape.strokeWidth());shape.getShadowForStrokeEnabled()||this.setAttr("shadowColor",
"rgba(0,0,0,0)");shape.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(shape):this.setAttr("strokeStyle",shape.stroke());shape._strokeFunc(this);strokeScaleEnabled||this.restore()}};SceneContext.prototype._applyShadow=function(shape){var util=Util_1.Util,color=util.get(shape.getShadowRGBA(),"black"),blur=util.get(shape.getShadowBlur(),5);util=util.get(shape.getShadowOffset(),{x:0,y:0});var scale=shape.getAbsoluteScale(),ratio=this.canvas.getPixelRatio();shape=scale.x*ratio;scale=scale.y*
ratio;this.setAttr("shadowColor",color);this.setAttr("shadowBlur",blur*Math.min(Math.abs(shape),Math.abs(scale)));this.setAttr("shadowOffsetX",util.x*shape);this.setAttr("shadowOffsetY",util.y*scale)};return SceneContext}(Context$jscomp$0);exports.SceneContext=global;global=function(_super){function HitContext(){return null!==_super&&_super.apply(this,arguments)||this}__extends(HitContext,_super);HitContext.prototype._fill=function(shape){this.save();this.setAttr("fillStyle",shape.colorKey);shape._fillFuncHit(this);
this.restore()};HitContext.prototype._stroke=function(shape){if(shape.hasStroke()&&shape.hitStrokeWidth()){var strokeScaleEnabled=shape.getStrokeScaleEnabled();if(!strokeScaleEnabled){this.save();var pixelRatio=this.getCanvas().getPixelRatio();this.setTransform(pixelRatio,0,0,pixelRatio,0,0)}this._applyLineCap(shape);pixelRatio=shape.hitStrokeWidth();pixelRatio="auto"===pixelRatio?shape.strokeWidth():pixelRatio;this.setAttr("lineWidth",pixelRatio);this.setAttr("strokeStyle",shape.colorKey);shape._strokeFuncHit(this);
strokeScaleEnabled||this.restore()}};return HitContext}(Context$jscomp$0);exports.HitContext=global}
//# sourceMappingURL=module$node_modules$konva$lib$Context.js.map
