{
"version":3,
"file":"module$node_modules$konva$lib$shapes$Sprite.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/konva/lib/shapes/Sprite.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$konva$lib$shapes$Sprite\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Animation_1 = require(\"../Animation\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Sprite = (function (_super) {\n    __extends(Sprite, _super);\n    function Sprite(config) {\n        var _this = _super.call(this, config) || this;\n        _this._updated = true;\n        _this.anim = new Animation_1.Animation(function () {\n            var updated = _this._updated;\n            _this._updated = false;\n            return updated;\n        });\n        _this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        _this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        _this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n        return _this;\n    }\n    Sprite.prototype._sceneFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    };\n    Sprite.prototype._hitFunc = function (context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    };\n    Sprite.prototype._useBufferCanvas = function () {\n        return ((this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke());\n    };\n    Sprite.prototype._setInterval = function () {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    };\n    Sprite.prototype.start = function () {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    };\n    Sprite.prototype.stop = function () {\n        this.anim.stop();\n        clearInterval(this.interval);\n    };\n    Sprite.prototype.isRunning = function () {\n        return this.anim.isRunning();\n    };\n    Sprite.prototype._updateIndex = function () {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    };\n    return Sprite;\n}(Shape_1.Shape));\nexports.Sprite = Sprite;\nSprite.prototype.className = 'Sprite';\nGlobal_1._registerNode(Sprite);\nFactory_1.Factory.addGetterSetter(Sprite, 'animation');\nFactory_1.Factory.addGetterSetter(Sprite, 'animations');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameOffsets');\nFactory_1.Factory.addGetterSetter(Sprite, 'image');\nFactory_1.Factory.addGetterSetter(Sprite, 'frameIndex', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Sprite, 'frameRate', 17, Validators_1.getNumberValidator());\nFactory_1.Factory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex'\n});\nUtil_1.Collection.mapMethods(Sprite);\n\n};"],
"names":["shadow$provide","global","require","module","exports","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","Util_1","Factory_1","Shape_1","Animation_1","Validators_1","Global_1","Sprite","_super","config","_this","call","_updated","anim","Animation","updated","on","frameIndex","isRunning","clearInterval","interval","_setInterval","_sceneFunc","Sprite.prototype._sceneFunc","context","animation","index","ix4","set","animations","offsets","frameOffsets","x","y","width","height","image","hasFill","hasStroke","beginPath","rect","closePath","fillStrokeShape","offset","drawImage","ix2","_hitFunc","Sprite.prototype._hitFunc","fillShape","_useBufferCanvas","Sprite.prototype._useBufferCanvas","hasShadow","getAbsoluteOpacity","Sprite.prototype._setInterval","that","setInterval","_updateIndex","frameRate","start","Sprite.prototype.start","layer","getLayer","setLayers","stop","Sprite.prototype.stop","Sprite.prototype.isRunning","Sprite.prototype._updateIndex","len","length","Shape","className","_registerNode","Factory","addGetterSetter","getNumberValidator","backCompat","getIndex","setIndex","Collection","mapMethods"]
}
