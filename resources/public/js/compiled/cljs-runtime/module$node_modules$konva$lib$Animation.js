shadow$provide.module$node_modules$konva$lib$Animation=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var Global_1=require("module$node_modules$konva$lib$Global"),now=function(){return Global_1.glob.performance&&Global_1.glob.performance.now?function(){return Global_1.glob.performance.now()}:function(){return(new Date).getTime()}}();global=function(){function Animation(func,layers){this.id=Animation.animIdCounter++;this.frame={time:0,timeDiff:0,lastTime:now(),
frameRate:0};this.func=func;this.setLayers(layers)}Animation.prototype.setLayers=function(layers){this.layers=layers?0<layers.length?layers:[layers]:[];return this};Animation.prototype.getLayers=function(){return this.layers};Animation.prototype.addLayer=function(layer){var layers=this.layers,len=layers.length,n;for(n=0;n<len;n++)if(layers[n]._id===layer._id)return!1;this.layers.push(layer);return!0};Animation.prototype.isRunning=function(){var animations=Animation.animations,len=animations.length,
n;for(n=0;n<len;n++)if(animations[n].id===this.id)return!0;return!1};Animation.prototype.start=function(){this.stop();this.frame.timeDiff=0;this.frame.lastTime=now();Animation._addAnimation(this);return this};Animation.prototype.stop=function(){Animation._removeAnimation(this);return this};Animation.prototype._updateFrameObject=function(time){this.frame.timeDiff=time-this.frame.lastTime;this.frame.lastTime=time;this.frame.time+=this.frame.timeDiff;this.frame.frameRate=1E3/this.frame.timeDiff};Animation._addAnimation=
function(anim){this.animations.push(anim);this._handleAnimation()};Animation._removeAnimation=function(anim){anim=anim.id;var animations=this.animations,len=animations.length,n;for(n=0;n<len;n++)if(animations[n].id===anim){this.animations.splice(n,1);break}};Animation._runFrames=function(){var layerHash={},animations=this.animations,n,key;for(n=0;n<animations.length;n++){var anim=animations[n];var layers=anim.layers;var func=anim.func;anim._updateFrameObject(now());var layersLen=layers.length;if(anim=
func?!1!==func.call(anim,anim.frame):!0)for(anim=0;anim<layersLen;anim++)func=layers[anim],void 0!==func._id&&(layerHash[func._id]=func)}for(key in layerHash)layerHash.hasOwnProperty(key)&&layerHash[key].draw()};Animation._animationLoop=function(){Animation.animations.length?(Animation._runFrames(),requestAnimationFrame(Animation._animationLoop)):Animation.animRunning=!1};Animation._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))};Animation.animations=
[];Animation.animIdCounter=0;Animation.animRunning=!1;return Animation}();exports.Animation=global}
//# sourceMappingURL=module$node_modules$konva$lib$Animation.js.map
